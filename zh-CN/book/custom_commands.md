# è‡ªå®šä¹‰å‘½ä»¤

ä¸ä»»ä½•ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œä½ å¾ˆå¿«å°±ä¼šæƒ³è¦ä¿å­˜è¾ƒé•¿çš„ç®¡é“å’Œè¡¨è¾¾å¼ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ—¶å¯ä»¥è½»æ¾åœ°å†æ¬¡è°ƒç”¨å®ƒä»¬ã€‚

è¿™å°±æ˜¯è‡ªå®šä¹‰å‘½ä»¤çš„ä½œç”¨ã€‚

::: tip æ³¨æ„
è‡ªå®šä¹‰å‘½ä»¤ä¸è®¸å¤šè¯­è¨€ä¸­çš„å‡½æ•°ç±»ä¼¼ï¼Œä½†åœ¨ Nushell ä¸­ï¼Œè‡ªå®šä¹‰å‘½ä»¤*æœ¬èº«å°±æ˜¯ä¸€ç­‰å…¬æ°‘*ã€‚æ­£å¦‚ä½ å°†åœ¨ä¸‹é¢çœ‹åˆ°çš„ï¼Œå®ƒä»¬ä¸å†…ç½®å‘½ä»¤ä¸€èµ·åŒ…å«åœ¨å¸®åŠ©ç³»ç»Ÿä¸­ï¼Œå¯ä»¥æˆä¸ºç®¡é“çš„ä¸€éƒ¨åˆ†ï¼Œä¼šå®æ—¶è¿›è¡Œç±»å‹é”™è¯¯è§£æç­‰ç­‰ã€‚
:::

[[toc]]

## åˆ›å»ºå’Œè¿è¡Œè‡ªå®šä¹‰å‘½ä»¤

è®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„ `greet` è‡ªå®šä¹‰å‘½ä»¤å¼€å§‹ï¼š

```nu
def greet [name] {
  $"Hello, ($name)!"
}
```

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å®šä¹‰äº† `greet` å‘½ä»¤ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‚æ•° `name`ã€‚æ­¤å‚æ•°åé¢æ˜¯è¡¨ç¤ºè‡ªå®šä¹‰å‘½ä»¤è¿è¡Œæ—¶å°†å‘ç”Ÿä»€ä¹ˆçš„å—ã€‚è°ƒç”¨æ—¶ï¼Œè‡ªå®šä¹‰å‘½ä»¤ä¼šå°†ä¸º `name` ä¼ é€’çš„å€¼è®¾ç½®ä¸º `$name` å˜é‡ï¼Œè¯¥å˜é‡å°†åœ¨å—å†…å¯ç”¨ã€‚

è¦è¿è¡Œæ­¤å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥åƒè°ƒç”¨å†…ç½®å‘½ä»¤ä¸€æ ·è°ƒç”¨å®ƒï¼š

```nu
greet "World"
# => Hello, World!
```

## ä»å‘½ä»¤è¿”å›å€¼

ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ä¸Šé¢çš„ç¤ºä¾‹ä¸­æ²¡æœ‰ `return` æˆ– `echo` è¯­å¥ã€‚

åƒ PowerShell å’Œ JavaScriptï¼ˆä½¿ç”¨ç®­å¤´å‡½æ•°ï¼‰ç­‰å…¶ä»–ä¸€äº›è¯­è¨€ä¸€æ ·ï¼ŒNushell å…·æœ‰*éšå¼è¿”å›*çš„ç‰¹æ€§ï¼Œå³å‘½ä»¤ä¸­æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼æˆä¸ºå…¶è¿”å›å€¼ã€‚

åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œåªæœ‰ä¸€ä¸ªè¡¨è¾¾å¼â€”â€”å­—ç¬¦ä¸²ã€‚æ­¤å­—ç¬¦ä¸²æˆä¸ºå‘½ä»¤çš„è¿”å›å€¼ã€‚

```nu
greet "World" | describe
# => string
```

å½“ç„¶ï¼Œä¸€ä¸ªå…¸å‹çš„å‘½ä»¤å°†ç”±å¤šä¸ªè¡¨è¾¾å¼ç»„æˆã€‚ä¸ºäº†æ¼”ç¤ºï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªåŒ…å« 3 ä¸ªè¡¨è¾¾å¼çš„æ— æ„ä¹‰å‘½ä»¤ï¼š

```nu
def eight [] {
  1 + 1
  2 + 2
  4 + 4
}

eight
# => 8
```

è¿”å›å€¼åŒæ ·åªæ˜¯å‘½ä»¤ä¸­*æœ€åä¸€ä¸ª*è¡¨è¾¾å¼çš„ç»“æœï¼Œå³ `4 + 4` (8)ã€‚

å…¶ä»–ç¤ºä¾‹ï¼š

::: details æå‰è¿”å›
ç”±äºæŸç§æƒ…å†µéœ€è¦æå‰é€€å‡ºçš„å‘½ä»¤ä»ç„¶å¯ä»¥ä½¿ç”¨ [`return` è¯­å¥](/zh-CN/commands/docs/return.md)è¿”å›å€¼ã€‚

```nu
def process-list [] {
  let input_length = length
  if $input_length > 10_000 {
    print "Input list is too long"
    return null
  }

  $in | each {|i|
    # Process the list
    $i * 4.25
  }
}
```

:::

::: details æŠ‘åˆ¶è¿”å›å€¼
ä½ é€šå¸¸ä¼šå¸Œæœ›åˆ›å»ºä¸€ä¸ªä½œä¸º*è¯­å¥*è€Œä¸æ˜¯è¡¨è¾¾å¼çš„è‡ªå®šä¹‰å‘½ä»¤ï¼Œå¹¶ä¸”ä¸è¿”å›å€¼ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ `ignore` å…³é”®å­—ï¼š

```nu
def create-three-files [] {
  [ file1 file2 file3 ] | each {|filename|
    touch $filename
  } | ignore
}
```

å¦‚æœæ²¡æœ‰ç®¡é“æœ«å°¾çš„ `ignore`ï¼Œè¯¥å‘½ä»¤å°†ä» `each` è¯­å¥è¿”å›ä¸€ä¸ªç©ºåˆ—è¡¨ã€‚

ä½ ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ª `null` ä½œä¸ºæœ€åä¸€ä¸ªè¡¨è¾¾å¼ã€‚æˆ–è€…ï¼Œåœ¨è¿™ä¸ªäººä¸ºçš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨ä¸€ä¸ªä¸è¿”å›å€¼çš„ `for` è¯­å¥ï¼ˆè§ä¸‹ä¸€ä¸ªä¾‹å­ï¼‰ã€‚
:::

::: details ä¸è¿”å›å€¼çš„è¯­å¥
Nushell ä¸­çš„ä¸€äº›å…³é”®å­—æ˜¯*è¯­å¥*ï¼Œä¸è¿”å›å€¼ã€‚å¦‚æœä½ ä½¿ç”¨è¿™äº›è¯­å¥ä¹‹ä¸€ä½œä¸ºè‡ªå®šä¹‰å‘½ä»¤çš„æœ€åä¸€ä¸ªè¡¨è¾¾å¼ï¼Œåˆ™*è¿”å›å€¼*å°†ä¸º `null`ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½æ˜¯æ„æ–™ä¹‹å¤–çš„ã€‚ä¾‹å¦‚ï¼š

```nu
def exponents-of-three [] {
  for x in [ 0 1 2 3 4 5 ] {
    3 ** $x
  }
}
exponents-of-three
```

ä¸Šé¢çš„å‘½ä»¤å°†ä¸æ˜¾ç¤ºä»»ä½•å†…å®¹ï¼Œè¿”å›å€¼ä¸º `null`ï¼Œå› ä¸º `for` æ˜¯ä¸€ä¸ªä¸è¿”å›å€¼çš„*è¯­å¥*ã€‚

è¦ä»è¾“å…¥åˆ—è¡¨ä¸­è¿”å›å€¼ï¼Œè¯·ä½¿ç”¨è¯¸å¦‚ `each` å‘½ä»¤ä¹‹ç±»çš„è¿‡æ»¤å™¨ï¼š

````nu
def exponents-of-three [] {
  [ 0 1 2 3 4 5 ] | each {|x|
    3 ** $x
  }
}

exponents-of-three

# => â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â•®
# => â”‚ 0 â”‚   1 â”‚
# => â”‚ 1 â”‚   3 â”‚
# => â”‚ 2 â”‚   9 â”‚
# => â”‚ 3 â”‚  27 â”‚
# => â”‚ 4 â”‚  81 â”‚
# => â”‚ 5 â”‚ 243 â”‚
# => â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â•¯
:::

::: details Match è¡¨è¾¾å¼
```nu
# è¿”å›å½“å‰ç›®å½•ä¸­çš„ä¸€ä¸ªéšæœºæ–‡ä»¶
def "random file" [] {
  let files = (ls)
  let num_files = ($files | length)

  match $num_files {
    0 => null  # å¯¹äºç©ºç›®å½•è¿”å› null
    _ => {
      let random_file = (random int 0..($num_files - 1))
      ($files | get $random_file)
    }
  }
}
````

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€åä¸€ä¸ªè¡¨è¾¾å¼æ˜¯ `match` è¯­å¥ï¼Œå®ƒå¯ä»¥è¿”å›ï¼š

- å¦‚æœç›®å½•ä¸ºç©ºï¼Œåˆ™è¿”å› `null`
- å¦åˆ™ï¼Œè¿”å›ä¸€ä¸ªè¡¨ç¤ºéšæœºé€‰æ‹©çš„æ–‡ä»¶çš„ `record`

:::

## è‡ªå®šä¹‰å‘½ä»¤å’Œç®¡é“

ä¸å†…ç½®å‘½ä»¤ä¸€æ ·ï¼Œè‡ªå®šä¹‰å‘½ä»¤çš„è¿”å›å€¼å¯ä»¥ä¼ é€’åˆ°ç®¡é“ä¸­çš„ä¸‹ä¸€ä¸ªå‘½ä»¤ã€‚è‡ªå®šä¹‰å‘½ä»¤ä¹Ÿå¯ä»¥æ¥å—ç®¡é“è¾“å…¥ã€‚æ­¤å¤–ï¼Œåªè¦æœ‰å¯èƒ½ï¼Œç®¡é“è¾“å…¥å’Œè¾“å‡ºéƒ½ä¼šåœ¨å¯ç”¨æ—¶è¿›è¡Œæµå¼å¤„ç†ã€‚

::: tip é‡è¦ï¼
å¦è¯·å‚é˜…ï¼š[ç®¡é“](./pipelines.html)
:::

### ç®¡é“è¾“å‡º

```nu
ls | get name
```

è®©æˆ‘ä»¬å°† [`ls`](/zh-CN/commands/docs/ls.md) ç§»åŠ¨åˆ°æˆ‘ä»¬ç¼–å†™çš„å‘½ä»¤ä¸­ï¼š

```nu
def my-ls [] { ls }
```

æˆ‘ä»¬å¯ä»¥åƒä½¿ç”¨ [`ls`](/zh-CN/commands/docs/ls.md) ä¸€æ ·ä½¿ç”¨æ­¤å‘½ä»¤çš„è¾“å‡ºã€‚

```nu
my-ls | get name
# => â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
# => â”‚ 0 â”‚ myscript.nu           â”‚
# => â”‚ 1 â”‚ myscript2.nu          â”‚
# => â”‚ 2 â”‚ welcome_to_nushell.md â”‚
# => â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

è¿™ä½¿æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°æ„å»ºè‡ªå®šä¹‰å‘½ä»¤å¹¶å¤„ç†å…¶è¾“å‡ºã€‚è¯·è®°ä½ï¼Œæˆ‘ä»¬ä¸åƒå…¶ä»–è¯­è¨€é‚£æ ·ä½¿ç”¨ return è¯­å¥ã€‚ç›¸åï¼Œ[éšå¼è¿”å›](#returning-values-from-a-command)å…è®¸æˆ‘ä»¬æ„å»ºè¾“å‡ºæ•°æ®æµçš„ç®¡é“ï¼Œè¿™äº›æ•°æ®æµå¯ä»¥è¿æ¥åˆ°å…¶ä»–ç®¡é“ã€‚

::: tip æ³¨æ„
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ`ls` å†…å®¹ä»ç„¶æ˜¯æµå¼çš„ï¼Œå³ä½¿å®ƒåœ¨ä¸€ä¸ªå•ç‹¬çš„å‘½ä»¤ä¸­ã€‚åœ¨æ…¢é€Ÿï¼ˆä¾‹å¦‚ï¼Œç½‘ç»œï¼‰æ–‡ä»¶ç³»ç»Ÿä¸Šå¯¹é•¿ç›®å½•è¿è¡Œæ­¤å‘½ä»¤å°†ä¼šåœ¨è¡Œå¯ç”¨æ—¶è¿”å›å®ƒä»¬ã€‚
:::

### ç®¡é“è¾“å…¥

è‡ªå®šä¹‰å‘½ä»¤ä¹Ÿå¯ä»¥ä»ç®¡é“ä¸­è·å–è¾“å…¥ï¼Œå°±åƒå…¶ä»–å‘½ä»¤ä¸€æ ·ã€‚æ­¤è¾“å…¥ä¼šè‡ªåŠ¨ä¼ é€’ç»™è‡ªå®šä¹‰å‘½ä»¤çš„å—ã€‚

è®©æˆ‘ä»¬åˆ›å»ºè‡ªå·±çš„å‘½ä»¤ï¼Œå°†æ¥æ”¶åˆ°çš„æ¯ä¸ªå€¼éƒ½åŠ å€ï¼š

```nu
def double [] {
  each { |num| 2 * $num }
}
```

ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ç®¡é“ä¸­ç¨åè°ƒç”¨ä¸Šè¿°å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒå¯¹è¾“å…¥çš„ä½œç”¨ï¼š

```nu
[1 2 3] | double
# => â•­â”€â”€â”€â”¬â”€â”€â”€â•®
# => â”‚ 0 â”‚ 2 â”‚
# => â”‚ 1 â”‚ 4 â”‚
# => â”‚ 2 â”‚ 6 â”‚
# => â•°â”€â”€â”€â”´â”€â”€â”€â•¯
```

::: tip é…·ï¼
æ­¤å‘½ä»¤æ¼”ç¤ºäº†è¾“å…¥å’Œè¾“å‡º*æµå¼å¤„ç†*ã€‚å°è¯•ä½¿ç”¨æ— é™è¾“å…¥è¿è¡Œå®ƒï¼š

```nu
1.. | each {||} | double
```

å³ä½¿è¾“å…¥å‘½ä»¤å°šæœªç»“æŸï¼Œ`double` å‘½ä»¤ä»ç„¶å¯ä»¥åœ¨å€¼å¯ç”¨æ—¶æ¥æ”¶å’Œè¾“å‡ºå®ƒä»¬ã€‚

æŒ‰ <kbd>Ctrl</kbd>+<kbd>C</kbd> åœæ­¢å‘½ä»¤ã€‚
:::

æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ [`$in` å˜é‡](pipelines.html#pipeline-input-and-the-special-in-variable)å­˜å‚¨è¾“å…¥ä»¥ä¾›ä»¥åä½¿ç”¨ï¼š

```nu
def nullify [...cols] {
  let start = $in
  $cols | reduce --fold $start { |col, table|
    $table | upsert $col null
  }
}

ls | nullify name size
# => â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
# => â”‚ # â”‚ name â”‚ type â”‚ size â”‚   modified    â”‚
# => â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# => â”‚ 0 â”‚      â”‚ file â”‚      â”‚ 8 minutes ago â”‚
# => â”‚ 1 â”‚      â”‚ file â”‚      â”‚ 8 minutes ago â”‚
# => â”‚ 2 â”‚      â”‚ file â”‚      â”‚ 8 minutes ago â”‚
# => â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

## å‘½åå‘½ä»¤

åœ¨ Nushell ä¸­ï¼Œå‘½ä»¤åå¯ä»¥æ˜¯ä¸€ä¸²å­—ç¬¦ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æœ‰æ•ˆå‘½ä»¤åçš„ç¤ºä¾‹ï¼š`greet`ã€`get-size`ã€`mycommand123`ã€`my command`ã€`å‘½ä»¤`ï¼Œç”šè‡³ `ğŸ˜Š`ã€‚

åº”é¿å…å¯èƒ½ä¸å…¶ä»–è§£æå™¨æ¨¡å¼æ··æ·†çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤åå¯èƒ½æ— æ³•è°ƒç”¨ï¼š

- `1`ã€`"1"` æˆ– `"1.5"`ï¼šNushell ä¸å…è®¸ä½¿ç”¨æ•°å­—ä½œä¸ºå‘½ä»¤å
- `4MiB` æˆ– `"4MiB"`ï¼šNushell ä¸å…è®¸ä½¿ç”¨æ–‡ä»¶å¤§å°ä½œä¸ºå‘½ä»¤å
- `"number#four"` æˆ– `"number^four"`ï¼šå‘½ä»¤åä¸­ä¸å…è®¸ä½¿ç”¨æ’å…¥ç¬¦å·å’Œå“ˆå¸Œç¬¦å·
- `-a`ã€`"{foo}"`ã€`"(bar)"`ï¼šå°†æ— æ³•è°ƒç”¨ï¼Œå› ä¸º Nushell ä¼šå°†å®ƒä»¬è§£é‡Šä¸ºæ ‡å¿—ã€é—­åŒ…æˆ–è¡¨è¾¾å¼ã€‚

è™½ç„¶åƒ `"+foo"` è¿™æ ·çš„åç§°å¯èƒ½æœ‰æ•ˆï¼Œä½†æœ€å¥½é¿å…ä½¿ç”¨ï¼Œå› ä¸ºè§£æå™¨è§„åˆ™å¯èƒ½ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œæ”¹å˜ã€‚å¦‚æœ‰ç–‘é—®ï¼Œè¯·ä½¿å‘½ä»¤åå°½å¯èƒ½ç®€å•ã€‚

::: tip
åœ¨ Nushell ä¸­ï¼Œé€šå¸¸çš„åšæ³•æ˜¯ç”¨ `-` åˆ†éš”å‘½ä»¤çš„å¤šä¸ªå•è¯ä»¥æé«˜å¯è¯»æ€§ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ `get-size` è€Œä¸æ˜¯ `getsize` æˆ– `get_size`ã€‚
:::

::: tip
å› ä¸º `def` æ˜¯ä¸€ä¸ªè§£æå™¨å…³é”®å­—ï¼Œæ‰€ä»¥å‘½ä»¤åå¿…é¡»åœ¨è§£ææ—¶å·²çŸ¥ã€‚è¿™æ„å‘³ç€å‘½ä»¤åä¸èƒ½æ˜¯å˜é‡æˆ–å¸¸é‡ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯*ä¸å…è®¸*çš„ï¼š

```nu
let name = "foo"
def $name [] { foo }
```

:::

### å­å‘½ä»¤

ä½ è¿˜å¯ä»¥ä½¿ç”¨ç©ºæ ¼å®šä¹‰å‘½ä»¤çš„å­å‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å‘ [`str`](/zh-CN/commands/docs/str.md) æ·»åŠ ä¸€ä¸ªæ–°å­å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥â€œstr â€å¼€å¤´å‘½åæˆ‘ä»¬çš„å­å‘½ä»¤æ¥åˆ›å»ºå®ƒã€‚ä¾‹å¦‚ï¼š

```nu
def "str mycommand" [] {
  "hello"
}
```

ç°åœ¨æˆ‘ä»¬å¯ä»¥åƒè°ƒç”¨ [`str`](/zh-CN/commands/docs/str.md) çš„å†…ç½®å­å‘½ä»¤ä¸€æ ·è°ƒç”¨æˆ‘ä»¬çš„è‡ªå®šä¹‰å‘½ä»¤ï¼š

```nu
str mycommand
```

å½“ç„¶ï¼Œåç§°ä¸­å¸¦ç©ºæ ¼çš„å‘½ä»¤ä¹Ÿä»¥åŒæ ·çš„æ–¹å¼å®šä¹‰ï¼š

```nu
def "custom command" [] {
  "This is a custom command with a space in the name!"
}
```

## å‚æ•°

### å¤šä¸ªå‚æ•°

åœ¨ `def` å‘½ä»¤ä¸­ï¼Œå‚æ•°åœ¨ [`list`](./types_of_data.md#lists) ä¸­å®šä¹‰ã€‚è¿™æ„å‘³ç€å¤šä¸ªå‚æ•°å¯ä»¥ç”¨ç©ºæ ¼ã€é€—å·æˆ–æ¢è¡Œç¬¦åˆ†éš”ã€‚

ä¾‹å¦‚ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªæ¥å—ä¸¤ä¸ªåç§°çš„ `greet` ç‰ˆæœ¬ã€‚è¿™ä¸‰ä¸ªå®šä¹‰ä¸­çš„ä»»ä½•ä¸€ä¸ªéƒ½å¯ä»¥å·¥ä½œï¼š

```nu
# ç©ºæ ¼
def greet [name1 name2] {
  $"Hello, ($name1) and ($name2)!"
}

# é€—å·
def greet [name1, name2] {
  $"Hello, ($name1) and ($name2)!"
}

# æ¢è¡Œç¬¦
def greet [
  name1
  name2
] {
  $"Hello, ($name1) and ($name2)!"
}
```

### å¿…éœ€çš„ä½ç½®å‚æ•°

ä¸Šé¢ä½¿ç”¨çš„åŸºæœ¬å‚æ•°å®šä¹‰æ˜¯*ä½ç½®*çš„ã€‚ä¼ é€’ç»™ä¸Šé¢ `greet` å‘½ä»¤çš„ç¬¬ä¸€ä¸ªå‚æ•°è¢«åˆ†é…ç»™ `name1` å‚æ•°ï¼ˆå¹¶ä¸”ï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œæ˜¯ `$name1` å˜é‡ï¼‰ã€‚ç¬¬äºŒä¸ªå‚æ•°æˆä¸º `name2` å‚æ•°å’Œ `$name2` å˜é‡ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ç½®å‚æ•°æ˜¯*å¿…éœ€*çš„ã€‚ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„å¸¦æœ‰ä¸¤ä¸ªå¿…éœ€ä½ç½®å‚æ•°çš„ `greet`ï¼š

```nu
def greet [name1, name2] {
  $"Hello, ($name1) and ($name2)!"
}

greet Wei Mei
# => Hello, Wei and Mei!

greet Wei
# => Error: nu::parser::missing_positional
# =>
# =>   Ã— Missing required positional argument.
# =>    â•­â”€[entry #1:1:10]
# =>  1 â”‚ greet Wei
# =>    â•°â”€â”€â”€â”€
# =>   help: Usage: greet <name1> <name2> . Use `--help` for more information.
```

::: tip
å°è¯•åœ¨æ­¤ç‰ˆæœ¬çš„ `greet` ä¹‹åé”®å…¥ç¬¬ä¸‰ä¸ªåç§°ã€‚è¯·æ³¨æ„ï¼Œè§£æå™¨ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°é”™è¯¯ï¼Œå¹¶åœ¨æ‰§è¡Œå‰å°†ç¬¬ä¸‰ä¸ªå‚æ•°çªå‡ºæ˜¾ç¤ºä¸ºé”™è¯¯ã€‚
:::

### å¯é€‰çš„ä½ç½®å‚æ•°

æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ä½ç½®å‚æ•°çš„åç§°ååŠ ä¸Šé—®å· (`?`) æ¥å°†å…¶å®šä¹‰ä¸ºå¯é€‰ã€‚ä¾‹å¦‚ï¼š

```nu
def greet [name?: string] {
  $"Hello, ($name | default 'You')"
}

greet
# => Hello, You
```

::: tip
è¯·æ³¨æ„ï¼Œç”¨äºè®¿é—®å˜é‡çš„åç§°ä¸åŒ…æ‹¬ `?`ï¼›åªæœ‰å…¶åœ¨å‘½ä»¤ç­¾åä¸­çš„å®šä¹‰æ‰åŒ…æ‹¬ã€‚
:::

å½“æœªä¼ é€’å¯é€‰å‚æ•°æ—¶ï¼Œå…¶åœ¨å‘½ä»¤ä¸»ä½“ä¸­çš„å€¼ä¸º `null`ã€‚ä¸Šé¢çš„ç¤ºä¾‹ä½¿ç”¨ `default` å‘½ä»¤åœ¨ `name` ä¸º `null` æ—¶æä¾›é»˜è®¤å€¼â€œYouâ€ã€‚

ä½ ä¹Ÿå¯ä»¥ç›´æ¥æ¯”è¾ƒè¯¥å€¼ï¼š

```nu
def greet [name?: string] {
  match $name {
    null => "Hello! I don't know your name!"
    _ => $"Hello, ($name)!"
  }
}

greet
# => Hello! I don't know your name!
```

å¦‚æœå¿…éœ€å’Œå¯é€‰çš„ä½ç½®å‚æ•°ä¸€èµ·ä½¿ç”¨ï¼Œåˆ™å¿…éœ€çš„å‚æ•°å¿…é¡»é¦–å…ˆå‡ºç°åœ¨å®šä¹‰ä¸­ã€‚

#### å¸¦é»˜è®¤å€¼çš„å‚æ•°

ä½ è¿˜å¯ä»¥ä¸ºç¼ºå°‘çš„å‚æ•°è®¾ç½®é»˜è®¤å€¼ã€‚å¸¦é»˜è®¤å€¼çš„å‚æ•°åœ¨è°ƒç”¨å‘½ä»¤æ—¶ä¹Ÿæ˜¯å¯é€‰çš„ã€‚

```nu
def greet [name = "Nushell"] {
  $"Hello, ($name)!"
}
```

ä½ å¯ä»¥ä¸å¸¦å‚æ•°è°ƒç”¨æ­¤å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥å¸¦ä¸€ä¸ªå€¼æ¥è¦†ç›–é»˜è®¤å€¼ï¼š

```nu
greet
# => Hello, Nushell!

greet world
# => Hello, World!
```

ä½ è¿˜å¯ä»¥å°†é»˜è®¤å€¼ä¸[ç±»å‹æ³¨è§£](#parameter-types)ç»“åˆèµ·æ¥ï¼š

```nu
def congratulate [age: int = 18] {
  $"Happy birthday! You are ($age) years old now!"
}
```

### å‚æ•°ç±»å‹

å¯¹äºæ¯ä¸ªå‚æ•°ï¼Œä½ å¯ä»¥é€‰æ‹©æ€§åœ°å®šä¹‰å…¶ç±»å‹ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥å°†åŸºæœ¬çš„ `greet` å‘½ä»¤å†™æˆï¼š

```nu
def greet [name: string] {
  $"Hello, ($name)"
}
```

å¦‚æœå‚æ•°æ²¡æœ‰ç±»å‹æ³¨è§£ï¼ŒNushell ä¼šå°†å…¶è§†ä¸º [`any` ç±»å‹](./types_of_data.html#any)ã€‚å¦‚æœä½ åœ¨å‚æ•°ä¸Šæ³¨è§£äº†ç±»å‹ï¼ŒNushell ä¼šåœ¨ä½ è°ƒç”¨å‡½æ•°æ—¶æ£€æŸ¥å…¶ç±»å‹ã€‚

ä¾‹å¦‚ï¼Œå‡è®¾ä½ åªæƒ³æ¥å—ä¸€ä¸ª `int` è€Œä¸æ˜¯ `string`ï¼š

```nu
def greet [name: int] {
  $"hello ($name)"
}

greet World
```

å¦‚æœæˆ‘ä»¬å°è¯•è¿è¡Œä¸Šé¢çš„ä»£ç ï¼ŒNushell ä¼šå‘Šè¯‰æˆ‘ä»¬ç±»å‹ä¸åŒ¹é…ï¼š

```nu
Error: nu::parser::parse_mismatch

  Ã— Parse mismatch during operation.
   â•­â”€[entry #1:1:7]
 1 â”‚ greet World
   Â·       â”€â”€â”¬â”€â”€
   Â·         â•°â”€â”€ expected int
   â•°â”€â”€â”€â”€
```

::: tip é…·ï¼
ç±»å‹æ£€æŸ¥æ˜¯è§£æå™¨çš„ä¸€é¡¹åŠŸèƒ½ã€‚åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥è‡ªå®šä¹‰å‘½ä»¤æ—¶ï¼ŒNushell è§£æå™¨ç”šè‡³å¯ä»¥å®æ—¶æ£€æµ‹åˆ°æ— æ•ˆçš„å‚æ•°ç±»å‹ï¼Œå¹¶åœ¨æ‰§è¡Œå‘½ä»¤å‰å°†å…¶çªå‡ºæ˜¾ç¤ºã€‚

çªå‡ºæ˜¾ç¤ºæ ·å¼å¯ä»¥ä½¿ç”¨[ä¸»é¢˜](https://github.com/nushell/nu_scripts/tree/main/themes)æˆ–æ‰‹åŠ¨ä½¿ç”¨ `$env.config.color_config.shape_garbage` è¿›è¡Œæ›´æ”¹ã€‚
:::

::: details ç±»å‹æ³¨è§£åˆ—è¡¨
å¤§å¤šæ•°ç±»å‹éƒ½å¯ä»¥ç”¨ä½œç±»å‹æ³¨è§£ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›â€œå½¢çŠ¶â€å¯ä»¥ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼š

- `number`: æ¥å— `int` æˆ– `float`
- `path`: ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶ä¸­ `~` å’Œ `.` å­—ç¬¦å…·æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå¹¶å°†è‡ªåŠ¨æ‰©å±•ä¸ºç­‰æ•ˆçš„å®Œæ•´è·¯å¾„ã€‚æœ‰å…³ç¤ºä¾‹ç”¨æ³•ï¼Œè¯·å‚é˜…è¯­è¨€å‚è€ƒæŒ‡å—ä¸­çš„[è·¯å¾„](/zh-CN/lang-guide/chapters/types/other_types/path.html)ã€‚
- `directory`: `path`ï¼ˆä¸Šæ–‡ï¼‰çš„å­é›†ã€‚ä½¿ç”¨åˆ¶è¡¨ç¬¦è¡¥å…¨å‚æ•°æ—¶ï¼Œåªä¼šæä¾›ç›®å½•ã€‚æ‰©å±•æ–¹å¼ä¸ `path` ç›¸åŒã€‚
- `error`: å¯ç”¨ï¼Œä½†ç›®å‰æ²¡æœ‰å·²çŸ¥çš„æœ‰æ•ˆç”¨æ³•ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…è¯­è¨€å‚è€ƒæŒ‡å—ä¸­çš„[é”™è¯¯](/zh-CN/lang-guide/chapters/types/other_types/error.html)ã€‚

ä»¥ä¸‹[ç±»å‹](./types_of_data.html)å¯ç”¨äºå‚æ•°æ³¨è§£ï¼š

- `any`
- `binary`
- `bool`
- `cell-path`
- `closure`
- `datetime`
- `duration`
- `filesize`
- `float`
- `glob`
- `int`
- `list`
- `nothing`
- `range`
- `record`
- `string`
- `table`

:::

### æ ‡å¿—

é™¤äº†ä½ç½®å‚æ•°ï¼Œä½ è¿˜å¯ä»¥å®šä¹‰å‘½åæ ‡å¿—ã€‚

ä¾‹å¦‚ï¼š

```nu
def greet [
  name: string
  --age: int
] {
    {
      name: $name
      age: $age
    }
}
```

åœ¨æ­¤ç‰ˆæœ¬çš„ `greet` ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº† `name` ä½ç½®å‚æ•°ä»¥åŠä¸€ä¸ª `age` æ ‡å¿—ã€‚ä½ç½®å‚æ•°ï¼ˆå› ä¸ºå®ƒæ²¡æœ‰ `?`ï¼‰æ˜¯å¿…éœ€çš„ã€‚å‘½åæ ‡å¿—æ˜¯å¯é€‰çš„ã€‚ä¸å¸¦ `--age` æ ‡å¿—è°ƒç”¨å‘½ä»¤ä¼šå°† `$age` è®¾ç½®ä¸º `null`ã€‚

`--age` æ ‡å¿—å¯ä»¥æ”¾åœ¨ä½ç½® `name` ä¹‹å‰æˆ–ä¹‹åã€‚ç¤ºä¾‹ï¼š

```nu
greet Lucia --age 23
# => â•­â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â•®
# => â”‚ name â”‚ Lucia â”‚
# => â”‚ age  â”‚ 23    â”‚
# => â•°â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â•¯

greet --age 39 Ali
# => â•­â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â•®
# => â”‚ name â”‚ Ali â”‚
# => â”‚ age  â”‚ 39  â”‚
# => â•°â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â•¯

greet World
# => â•­â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â•®
# => â”‚ name â”‚ World â”‚
# => â”‚ age  â”‚       â”‚
# => â•°â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â•¯
```

æ ‡å¿—ä¹Ÿå¯ä»¥ç”¨ç®€å†™ç‰ˆæœ¬å®šä¹‰ã€‚è¿™å…è®¸ä½ ä¼ é€’ä¸€ä¸ªæ›´ç®€å•çš„æ ‡å¿—ä»¥åŠä¸€ä¸ªæ›´æ˜“äºé˜…è¯»çš„é•¿æ ‡å¿—ã€‚

è®©æˆ‘ä»¬æ‰©å±•å‰é¢çš„ç¤ºä¾‹ï¼Œä¸º `age` å€¼ä½¿ç”¨ä¸€ä¸ªç®€å†™æ ‡å¿—ï¼š

```nu
def greet [
  name: string
  --age (-a): int
] {
    {
      name: $name
      age: $age
    }
  }
```

::: tip
ç»“æœå˜é‡å§‹ç»ˆåŸºäºé•¿æ ‡å¿—åç§°ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå˜é‡ä»ç„¶æ˜¯ `$age`ã€‚`$a` å°†æ— æ•ˆã€‚
:::

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç®€å†™æ ‡å¿—è°ƒç”¨æ­¤æ›´æ–°åçš„å®šä¹‰ï¼š

```nu
greet Akosua -a 35
# => â•­â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â•®
# => â”‚ name â”‚ Akosua â”‚
# => â”‚ age  â”‚ 35     â”‚
# => â•°â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

æ ‡å¿—ä¹Ÿå¯ä»¥ç”¨ä½œåŸºæœ¬å¼€å…³ã€‚å­˜åœ¨æ—¶ï¼ŒåŸºäºå¼€å…³çš„å˜é‡ä¸º `true`ã€‚ä¸å­˜åœ¨æ—¶ï¼Œä¸º `false`ã€‚

```nu
def greet [
  name: string
  --caps
] {
    let greeting = $"Hello, ($name)!"
    if $caps {
      $greeting | str upcase
    } else {
      $greeting
    }
}

greet Miguel --caps
# => HELLO, MIGUEL!

greet Chukwuemeka
# => Hello, Chukwuemeka!
```

ä½ è¿˜å¯ä»¥å°†å…¶åˆ†é…ç»™ `true`/`false` ä»¥å¯ç”¨/ç¦ç”¨è¯¥æ ‡å¿—ï¼š

```nu
greet Giulia --caps=false
# => Hello, Giulia!

greet Hiroshi --caps=true
# => HELLO, HIROSHI!
```

::: tip
è¯·æ³¨æ„ä»¥ä¸‹é”™è¯¯ï¼š

```nu
greet Gabriel --caps true
```

é”®å…¥ç©ºæ ¼è€Œä¸æ˜¯ç­‰å·ä¼šå°† `true` ä½œä¸ºä½ç½®å‚æ•°ä¼ é€’ï¼Œè¿™å¯èƒ½ä¸æ˜¯æœŸæœ›çš„ç»“æœï¼

ä¸ºé¿å…æ··æ·†ï¼Œä¸å…è®¸åœ¨æ ‡å¿—ä¸Šæ³¨è§£å¸ƒå°”ç±»å‹ï¼š

```nu
def greet [
    --caps: bool   # ä¸å…è®¸
] { ... }
```

:::

æ ‡å¿—å¯ä»¥åŒ…å«ç ´æŠ˜å·ã€‚å¯ä»¥é€šè¿‡åœ¨ç»“æœå˜é‡åä¸­ç”¨ä¸‹åˆ’çº¿æ›¿æ¢ç ´æŠ˜å·æ¥è®¿é—®å®ƒä»¬ï¼š

```nu
def greet [
  name: string
  --all-caps
] {
    let greeting = $"Hello, ($name)!"
    if $all_caps {
      $greeting | str upcase
    } else {
      $greeting
    }
}
```

### å‰©ä½™å‚æ•°

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½æƒ³å®šä¹‰ä¸€ä¸ªéœ€è¦ä»»æ„æ•°é‡çš„ä½ç½®å‚æ•°çš„å‘½ä»¤ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªâ€œå‰©ä½™â€å‚æ•°æ¥å®ç°è¿™ä¸€ç‚¹ï¼Œä½¿ç”¨ä¸‹é¢çš„ `...` è¯­æ³•ï¼š

```nu
def multi-greet [...names: string] {
  for $name in $names {
    print $"Hello, ($name)!"
  }
}

multi-greet Elin Lars Erik
# => Hello, Elin!
# => Hello, Lars!
# => Hello, Erik!
```

æˆ‘ä»¬å¯ä»¥ç”¨ä»»æ„æ•°é‡çš„å‚æ•°è°ƒç”¨ä¸Šé¢ `greet` å‘½ä»¤çš„å®šä¹‰ï¼ŒåŒ…æ‹¬å®Œå…¨æ²¡æœ‰å‚æ•°ã€‚æ‰€æœ‰å‚æ•°éƒ½å°†æ”¶é›†åˆ° `$names` åˆ—è¡¨ä¸­ã€‚

å‰©ä½™å‚æ•°å¯ä»¥å’Œä½ç½®å‚æ•°ä¸€èµ·ä½¿ç”¨ï¼š

```nu
def vip-greet [vip: string, ...names: string] {
  for $name in $names {
    print $"Hello, ($name)!"
  }

  print $"And a special welcome to our VIP today, ($vip)!"
}

#         $vip          $name
#         ----- -------------------------
vip-greet Rahul Priya Arjun Anjali Vikram
# => Hello, Priya!
# => Hello, Arjun!
# => Hello, Anjali!
# => Hello, Vikram!
# => And a special welcome to our VIP today, Rahul!
```

è¦å°†åˆ—è¡¨ä¼ é€’ç»™å‰©ä½™å‚æ•°ï¼Œä½ å¯ä»¥ä½¿ç”¨[å±•å¼€è¿ç®—ç¬¦](/book/operators#spread-operator) (`...`)ã€‚ä½¿ç”¨ä¸Šé¢çš„ `vip-greet` å‘½ä»¤å®šä¹‰ï¼š

```nu
let vip = "Tanisha"
let guests = [ Dwayne, Shanice, Jerome ]
vip-greet $vip ...$guests
# => Hello, Dwayne!
# => Hello, Shanice!
# => Hello, Jerome!
# => And a special welcome to our VIP today, Tanisha!
```

### å¸¦åŒ…è£…çš„å¤–éƒ¨å‘½ä»¤çš„å‰©ä½™å‚æ•°

ä½¿ç”¨ `def --wrapped` å®šä¹‰çš„è‡ªå®šä¹‰å‘½ä»¤ä¼šå°†ä»»ä½•æœªçŸ¥çš„æ ‡å¿—å’Œå‚æ•°æ”¶é›†åˆ°ä¸€ä¸ªå‰©ä½™å‚æ•°ä¸­ï¼Œç„¶åå¯ä»¥é€šè¿‡åˆ—è¡¨å±•å¼€å°†å…¶ä¼ é€’ç»™å¤–éƒ¨å‘½ä»¤ã€‚è¿™å…è®¸è‡ªå®šä¹‰å‘½ä»¤â€œåŒ…è£…â€å’Œæ‰©å±•å¤–éƒ¨å‘½ä»¤ï¼ŒåŒæ—¶ä»ç„¶æ¥å—å…¶æ‰€æœ‰åŸå§‹å‚æ•°ã€‚ä¾‹å¦‚ï¼Œå¤–éƒ¨ `eza` å‘½ä»¤æ˜¾ç¤ºç›®å½•åˆ—è¡¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ˜¾ç¤ºç½‘æ ¼æ’åˆ—ï¼š

```nu
eza commands
# => categories  docs  README.md
```

æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªæ–°å‘½ä»¤ `ezal`ï¼Œå®ƒå°†å§‹ç»ˆæ˜¾ç¤ºé•¿åˆ—è¡¨ï¼Œå¹¶æ·»åŠ å›¾æ ‡ï¼š

```nu
def --wrapped ezal [...rest] {
  eza -l ...$rest
}
```

:::note
ä½ ä¹Ÿå¯ä»¥æ·»åŠ  `--icons`ã€‚æˆ‘ä»¬åœ¨æ­¤ç¤ºä¾‹ä¸­çœç•¥å®ƒï¼Œåªæ˜¯å› ä¸ºè¿™äº›å›¾æ ‡åœ¨æœ¬æŒ‡å—ä¸­æ˜¾ç¤ºæ•ˆæœä¸ä½³ã€‚
:::

è¯·æ³¨æ„ï¼Œ`--wrapped` ä¼šå°†ä»»ä½•å…¶ä»–å‚æ•°å¼ºåˆ¶æ”¾å…¥ `rest` å‚æ•°ä¸­ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ `eza` æ”¯æŒçš„ä»»ä½•å‚æ•°è°ƒç”¨è¯¥å‘½ä»¤ã€‚è¿™äº›é™„åŠ å‚æ•°å°†é€šè¿‡åˆ—è¡¨å±•å¼€æ“ä½œ `...$rest` è¿›è¡Œæ‰©å±•ã€‚

```nu
ezal commands
# => drwxr-xr-x   - ntd  7 Feb 11:41 categories
# => drwxr-xr-x   - ntd  7 Feb 11:41 docs
# => .rw-r--r-- 936 ntd 14 Jun  2024 README.md

ezal -d commands
# => drwxr-xr-x - ntd 14 Jun  2024 commands
```

è‡ªå®šä¹‰å‘½ä»¤å¯ä»¥æ£€æŸ¥æŸäº›å‚æ•°å¹¶ç›¸åº”åœ°æ›´æ”¹å…¶è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œå½“ä½¿ç”¨ `-G` é€‰é¡¹å¼ºåˆ¶ä½¿ç”¨ç½‘æ ¼æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœç•¥å‘ `eza` ä¼ é€’ `-l`ï¼š

```nu
def --wrapped ezal [...rest] {
  if '-G' in $rest {
    eza ...$rest
  } else {
    eza -l --icons ...$rest
  }
}

ezal -G commands
# => categories  docs  README.md
```

## ç®¡é“è¾“å…¥è¾“å‡ºç­¾å

é»˜è®¤æƒ…å†µä¸‹ï¼Œè‡ªå®šä¹‰å‘½ä»¤æ¥å— [`<any>` ç±»å‹](./types_of_data.md#any)ä½œä¸ºç®¡é“è¾“å…¥ï¼ŒåŒæ ·å¯ä»¥è¾“å‡º `<any>` ç±»å‹ã€‚ä½†è‡ªå®šä¹‰å‘½ä»¤ä¹Ÿå¯ä»¥è¢«èµ‹äºˆæ˜ç¡®çš„ç­¾åä»¥ç¼©å°å…è®¸çš„ç±»å‹èŒƒå›´ã€‚

ä¾‹å¦‚ï¼Œ[`str stats`](/zh-CN/commands/docs/str_stats.md) çš„ç­¾åå¦‚ä¸‹æ‰€ç¤ºï¼š

```nu
def "str stats" []: string -> record { }
```

åœ¨è¿™é‡Œï¼Œ`string -> record` å®šä¹‰äº†å‘½ä»¤çš„*ç®¡é“è¾“å…¥å’Œè¾“å‡º*çš„å…è®¸ç±»å‹ï¼š

- å®ƒæ¥å—ä¸€ä¸ª `string` ä½œä¸ºç®¡é“è¾“å…¥
- å®ƒè¾“å‡ºä¸€ä¸ª `record`

å¦‚æœæœ‰å¤šä¸ªè¾“å…¥/è¾“å‡ºç±»å‹ï¼Œå®ƒä»¬å¯ä»¥æ”¾åœ¨æ‹¬å·å†…å¹¶ç”¨é€—å·æˆ–æ¢è¡Œç¬¦åˆ†éš”ï¼Œå¦‚ [`str join`](/zh-CN/commands/docs/str_join.md) ä¸­æ‰€ç¤ºï¼š

```nu
def "str join" [separator?: string]: [
  list -> string
  string -> string
] { }
```

è¿™è¡¨ç¤º `str join` å¯ä»¥æ¥å— `list<any>` æˆ– `string` ä½œä¸ºç®¡é“è¾“å…¥ã€‚åœ¨ä»»ä½•ä¸€ç§æƒ…å†µä¸‹ï¼Œå®ƒéƒ½å°†è¾“å‡ºä¸€ä¸ª `string`ã€‚

æœ‰äº›å‘½ä»¤ä¸æ¥å—æˆ–ä¸éœ€è¦æ•°æ®ä½œä¸ºç®¡é“è¾“å…¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¾“å…¥ç±»å‹å°†æ˜¯ `<nothing>`ã€‚å¦‚æœå‘½ä»¤è¿”å› `null`ï¼ˆä¾‹å¦‚ï¼Œ[`rm`](/zh-CN/commands/docs/rm.md) æˆ– [`hide`](/zh-CN/commands/docs/hide.md)ï¼‰ï¼Œè¾“å‡ºç±»å‹ä¹Ÿæ˜¯å¦‚æ­¤ï¼š

```nu
def xhide [module: string, members?]: nothing -> nothing { }
```

::: tip æ³¨æ„
ä¸Šé¢çš„ç¤ºä¾‹è¢«é‡å‘½åä¸º `xhide`ï¼Œä»¥ä¾¿å°†å…¶å¤åˆ¶åˆ° REPL ä¸ä¼šé®è”½å†…ç½®çš„ `hide` å‘½ä»¤ã€‚
:::

è¾“å…¥è¾“å‡ºç­¾åæ˜¾ç¤ºåœ¨å‘½ä»¤çš„ `help` ä¸­ï¼ˆåŒ…æ‹¬å†…ç½®å’Œè‡ªå®šä¹‰å‘½ä»¤ï¼‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œå†…çœï¼š

```nu
help commands | where name == <command_name>
scope commands | where name == <command_name>
```

:::tip é…·ï¼
è¾“å…¥è¾“å‡ºç­¾åå…è®¸ Nushell åœ¨è§£ææ—¶æ•è·å¦å¤–ä¸¤ç±»é”™è¯¯ï¼š

- å°è¯•ä»å‘½ä»¤è¿”å›é”™è¯¯çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼š

  ```nu
  def inc []: int -> int {
    $in + 1
    print "Did it!"
  }

  # => Error: nu::parser::output_type_mismatch
  # =>
  # =>   Ã— Command output doesn't match int.
  # =>    â•­â”€[entry #1:1:24]
  # =>  1 â”‚ â•­â”€â–¶ def inc []: int -> int {
  # =>  2 â”‚ â”‚     $in + 1
  # =>  3 â”‚ â”‚     print "Did it!"
  # =>  4 â”‚ â”œâ”€â–¶ }
  # =>    Â· â•°â”€â”€â”€â”€ expected int, but command outputs nothing
  # =>    â•°â”€â”€â”€â”€
  ```

- ä»¥åŠå°è¯•å°†æ— æ•ˆç±»å‹ä¼ é€’ç»™å‘½ä»¤ï¼š

  ```nu
  def inc []: int -> int { $in + 1 }
  "Hi" | inc
  # => Error: nu::parser::input_type_mismatch
  # =>
  # =>   Ã— Command does not support string input.
  # =>    â•­â”€[entry #1:1:8]
  # =>  1 â”‚ "Hi" | inc
  # =>    Â·        â”€â”¬â”€
  # =>    Â·         â•°â”€â”€ command doesn't support string input
  # =>    â•°â”€â”€â”€â”€
  ```

:::

## ä¸ºä½ çš„å‘½ä»¤æ·»åŠ æ–‡æ¡£

ä¸ºäº†æ›´å¥½åœ°å¸®åŠ©ç”¨æˆ·ç†è§£å¦‚ä½•ä½¿ç”¨ä½ çš„è‡ªå®šä¹‰å‘½ä»¤ï¼Œä½ è¿˜å¯ä»¥ä¸ºå®ƒä»¬æ·»åŠ é¢å¤–çš„å‘½ä»¤å’Œå‚æ•°æè¿°ã€‚

è¿è¡Œ `help vip-greet` æ¥æ£€æŸ¥æˆ‘ä»¬ä¸Šé¢å®šä¹‰çš„æœ€æ–°å‘½ä»¤ï¼š

```text
Usage:
  > vip-greet <vip> ...(names)

Flags:
  -h, --help - Display the help message for this command

Parameters:
  vip <string>
  ...names <string>

Input/output types:
  â•­â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â•®
  â”‚ # â”‚ input â”‚ output â”‚
  â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ 0 â”‚ any   â”‚ any    â”‚
  â•°â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

::: tip é…·ï¼
ä½ å¯ä»¥çœ‹åˆ° Nushell ä»…æ ¹æ®æˆ‘ä»¬åˆ°ç›®å‰ä¸ºæ­¢çš„å®šä¹‰å°±è‡ªåŠ¨ä¸ºè¯¥å‘½ä»¤åˆ›å»ºäº†ä¸€äº›åŸºæœ¬å¸®åŠ©ã€‚Nushell è¿˜è‡ªåŠ¨å‘è¯¥å‘½ä»¤æ·»åŠ äº†ä¸€ä¸ª `--help`/`-h` æ ‡å¿—ï¼Œå› æ­¤ç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨ `vip-greet --help` è®¿é—®å¸®åŠ©ã€‚
:::

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›ç®€å•çš„æ³¨é‡Šæ¥è¿›ä¸€æ­¥æ‰©å±•å¸®åŠ©ï¼Œæè¿°å‘½ä»¤åŠå…¶å‚æ•°ï¼š

```nu
# é—®å€™å®¢äººå’Œä¸€ä½è´µå®¾
#
# ç”¨äºç”Ÿæ—¥ã€æ¯•ä¸šæ´¾å¯¹ã€
# é€€ä¼‘ï¼Œä»¥åŠä»»ä½•å…¶ä»–åº†ç¥
# ç‰¹å®šäººç‰©äº‹ä»¶çš„æ´»åŠ¨ã€‚
def vip-greet [
  vip: string        # ç‰¹åˆ«å˜‰å®¾
   ...names: string  # å…¶ä»–å®¢äºº
] {
  for $name in $names {
    print $"Hello, ($name)!"
  }

  print $"And a special welcome to our VIP today, ($vip)!"
}
```

ç°åœ¨å†æ¬¡è¿è¡Œ `help vip-greet` æ¥çœ‹çœ‹æœ‰ä»€ä¹ˆä¸åŒï¼š

```text
é—®å€™å®¢äººå’Œä¸€ä½è´µå®¾

ç”¨äºç”Ÿæ—¥ã€æ¯•ä¸šæ´¾å¯¹ã€
é€€ä¼‘ï¼Œä»¥åŠä»»ä½•å…¶ä»–åº†ç¥
ç‰¹å®šäººç‰©äº‹ä»¶çš„æ´»åŠ¨ã€‚

Category: default

This command:
- does not create a scope.
- is not a built-in command.
- is not a subcommand.
- is not part of a plugin.
- is a custom command.
- is not a keyword.

Usage:
  > vip-greet <vip>


Flags:


  -h, --help - Display the help message for this command

Signatures:

  <any> | vip-greet[ <string>] -> <any>

Parameters:

  vip: <string> The special guest
  ...rest: <string> The other guests
```

è¯·æ³¨æ„ï¼Œ`def` è¯­å¥å‰ç´§æ¥çš„æ³¨é‡Šè¡Œæˆä¸ºå¸®åŠ©ç³»ç»Ÿä¸­å‘½ä»¤çš„æè¿°ã€‚å¯ä»¥ä½¿ç”¨å¤šè¡Œæ³¨é‡Šã€‚ç¬¬ä¸€è¡Œï¼ˆåœ¨ç©ºæ³¨é‡Šè¡Œä¹‹å‰ï¼‰æˆä¸ºå¸®åŠ©çš„ `description`ã€‚æ­¤ä¿¡æ¯åœ¨åˆ¶è¡¨ç¬¦è¡¥å…¨å‘½ä»¤æ—¶ä¹Ÿä¼šæ˜¾ç¤ºã€‚

å…¶ä½™çš„æ³¨é‡Šè¡Œæˆä¸ºå…¶åœ¨å¸®åŠ©æ•°æ®ä¸­çš„ `extra_description`ã€‚

::: tip
è¿è¡Œï¼š

```nu
scope commands
| where name == 'vip-greet'
| wrap help
```

è¿™å°†æ˜¾ç¤º Nushell åˆ›å»ºçš„å¸®åŠ©*è®°å½•*ã€‚
:::

å‚æ•°åé¢çš„æ³¨é‡Šæˆä¸ºå®ƒä»¬çš„æè¿°ã€‚å¯¹äºå‚æ•°ï¼Œåªå…è®¸å•è¡Œæ³¨é‡Šã€‚

::: tip æ³¨æ„
ç”¨äºå‚æ•°æ–‡æ¡£ç›®çš„çš„åŒä¸€è¡Œä¸Šçš„ Nushell æ³¨é‡Šéœ€è¦åœ¨ `#` ç£…å·å‰æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚
:::

## åœ¨è‡ªå®šä¹‰å‘½ä»¤ä¸­æ›´æ”¹ç¯å¢ƒ

é€šå¸¸ï¼Œç¯å¢ƒå˜é‡å®šä¹‰å’Œæ›´æ”¹åœ¨å—å†…æ˜¯*ä½œç”¨åŸŸ*çš„ï¼ˆ[./environment.html#scoping](./environment.html#scoping)ï¼‰ã€‚è¿™æ„å‘³ç€å½“å®ƒä»¬åœ¨å—ç»“æŸæ—¶è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œå¯¹è¿™äº›å˜é‡çš„æ›´æ”¹å°†ä¸¢å¤±ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰å‘½ä»¤çš„å—ã€‚

```nu
def foo [] {
    $env.FOO = 'After'
}

$env.FOO = "Before"
foo
$env.FOO
# => Before
```

ä½†æ˜¯ï¼Œä½¿ç”¨ [`def --env`](/zh-CN/commands/docs/def.md) æˆ– [`export def --env`](/zh-CN/commands/docs/export_def.md)ï¼ˆå¯¹äº[æ¨¡å—](modules.md)ï¼‰å®šä¹‰çš„å‘½ä»¤å°†åœ¨è°ƒç”¨æ–¹ä¿ç•™ç¯å¢ƒï¼š

```nu
def --env foo [] {
    $env.FOO = 'After'
}

$env.FOO = "Before"
foo
$env.FOO
# => After
```

### åœ¨è‡ªå®šä¹‰å‘½ä»¤ä¸­æ›´æ”¹ç›®å½• (cd)

åŒæ ·ï¼Œä½¿ç”¨ `cd` å‘½ä»¤æ›´æ”¹ç›®å½•ä¼šå¯¼è‡´ `$env.PWD` ç¯å¢ƒå˜é‡çš„æ›´æ”¹ã€‚è¿™æ„å‘³ç€å½“è‡ªå®šä¹‰å‘½ä»¤ç»“æŸæ—¶ï¼Œç›®å½•æ›´æ”¹ï¼ˆ`$env.PWD` å˜é‡ï¼‰ä¹Ÿå°†è¢«é‡ç½®ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ `def --env` æˆ– `export def --env`ã€‚

```nu
def --env go-home [] {
  cd ~
}

cd /
go-home
pwd
# => Your home directory
```

## æŒä¹…åŒ–

è¦ä½¿è‡ªå®šä¹‰å‘½ä»¤åœ¨å°†æ¥çš„ Nushell ä¼šè¯ä¸­å¯ç”¨ï¼Œä½ éœ€è¦å°†å®ƒä»¬æ·»åŠ åˆ°ä½ çš„å¯åŠ¨é…ç½®ä¸­ã€‚ä½ å¯ä»¥å°†å‘½ä»¤å®šä¹‰æ·»åŠ åˆ°ï¼š

- ç›´æ¥åœ¨ä½ çš„ `config.nu` ä¸­
- ç”±ä½ çš„ `config.nu` åŠ è½½çš„æ–‡ä»¶ä¸­
- ç”±ä½ çš„ `config.nu` å¯¼å…¥çš„[æ¨¡å—](./modules.html)ä¸­

æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[é…ç½®ç« èŠ‚](configuration.md)ã€‚
