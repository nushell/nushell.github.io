---
title: Nushell 0.93.0
author: The Nu Authors
author_site: https://twitter.com/nu_shell
author_image: https://www.nushell.sh/blog/images/nu_logo.png
excerpt: Today, we're releasing version 0.93.0 of Nu. This release reworks plugin management, allows plugins to interact with the terminal, adds a new Polars plugin, and makes some changes around setting environment variables.
---

# Nushell 0.93.0

Nushell, or Nu for short, is a new shell that takes a modern, structured approach to your command line. It works seamlessly with the data from your filesystem, operating system, and a growing number of file formats to make it easy to build powerful command line pipelines.

Today, we're releasing version 0.93.0 of Nu. This release reworks plugin management, allows plugins to interact with the terminal, adds a new Polars plugin, and makes some changes around setting environment variables.
Please note that these changes come paired with several deprecations that are explained further below.

# Where to get it

Nu 0.93.0 is available as [pre-built binaries](https://github.com/nushell/nushell/releases/tag/0.93.0) or from [crates.io](https://crates.io/crates/nu). If you have Rust installed you can install it using `cargo install nu`.

::: tip Note
The optional dataframe functionality is available by `cargo install nu --features=dataframe`.
:::

As part of this release, we also publish a set of optional plugins you can install and use with Nu. To install, use `cargo install nu_plugin_<plugin name>`.

# Table of content
- [*Themes of this release / New features*](#themes-of-this-release-new-features-toc)
    - [*Redesigned plugin management commands*](#redesigned-plugin-management-commands-toc)
    - [*New plugin cache format*](#new-plugin-cache-format-toc)
    - [*Improved terminal interaction for plugins*](#improved-terminal-interaction-for-plugins-toc)
    - [Introduction of the Polars Plugin](#introduction-of-the-polars-plugin-toc)
    - [Dataframes deprecation](#dataframes-deprecation-toc)
    - [*Lazy record deprecation*](#lazy-record-deprecation-toc)
    - [*Stricter rules around setting environment variables*](#stricter-rules-around-setting-environment-variables-toc)
    - [*Improved parsing of input/output types*](#improved-parsing-of-input-output-types-toc)
    - [*New CLI flag: `--no-newline`*](#new-cli-flag-no-newline-toc)
    - [*Hall of fame*](#hall-of-fame-toc)
        - [*Bug fixes*](#bug-fixes-toc)
        - [*Enhancing the documentation*](#enhancing-the-documentation-toc)
    - [*Our set of commands is evolving*](#our-set-of-commands-is-evolving-toc)
        - [*New commands*](#new-commands-toc)
            - [*`plugin add`*](#plugin-add-toc)
            - [*`plugin rm`*](#plugin-rm-toc)
            - [*`plugin use`*](#plugin-use-toc)
            - [*`from msgpack`*](#from-msgpack-toc)
            - [*`to msgpack`*](#to-msgpack-toc)
            - [*`from msgpackz`*](#from-msgpackz-toc)
            - [*`to msgpackz`*](#to-msgpackz-toc)
            - [*`metadata set`*](#metadata-set-toc)
        - [*Changes to existing commands*](#changes-to-existing-commands-toc)
            - [*`with-env`*](#with-env-toc)
            - [*`load-env`*](#load-env-toc)
            - [*`last`*](#last-toc)
            - [*`drop`*](#drop-toc)
            - [*`skip`*](#skip-toc)
            - [*`group-by`*](#group-by-toc)
            - [*`timeit`*](#timeit-toc)
            - [*`kill`*](#kill-toc)
            - [*`each`*](#each-toc)
            - [*`ls`*](#ls-toc)
            - [*`du`*](#du-toc)
            - [*`try`*](#try-toc)
            - [*`version`*](#version-toc)
            - [*`into-filesize`*](#into-filesize-toc)
            - [*`view source`*](#view-source-toc)
            - [*`grid`*](#grid-toc)
            - [*`explain`*](#explain-toc)
        - [*Deprecated commands*](#deprecated-commands-toc)
            - [*`register`*](#register-toc)
            - [*`lazy make`*](#lazy-make-toc)
            - [*`describe --collect-lazyrecords`*](#describe-collect-lazyrecords-toc)
        - [*Removed commands and flags*](#removed-commands-and-flags-toc)
            - [*`run external` flags*](#run-external-flags-toc)
            - [*`commandline` flags*](#commandline-flags-toc)
    - [*For plugin developers*](#for-plugin-developers-toc)
        - [*New protocol features*](#new-protocol-features-toc)
        - [*New engine calls*](#new-engine-calls-toc)
- [*Breaking changes*](#breaking-changes-toc)
- [*Full changelog*](#full-changelog-toc)

# Themes of this release / New features [[toc](#table-of-content)]

## Redesigned plugin management commands [[toc](#table-of-content)]

::: warning Deprecation warning
`register` is now deprecated and will be removed in the next major release. Read this section for alternatives.
:::

We've changed the way plugins are managed in Nushell in this release. In 0.92 and earlier, plugins were added with `register`, e.g.:

```nushell
> register ~/.cargo/bin/nu_plugin_gstat
```

This ran the plugin to get the signatures of the commands it supports, and then did two things: it added them to your `$nu.plugin-file` (previously called `plugin.nu`), so that they would be ready next time `nu` is run without having to ask the plugin again, and it also added them to your scope so you could use them immediately. While this was convenient, it had the drawback of always running the plugin at parse time (see issue [#11923](https://github.com/nushell/nushell/issues/11923)), which was less than ideal.

We now have two commands to replace `register` that break this functionality into two steps:

1. [`plugin add`](#plugin-add-toc), a normal command, which runs the plugin to get command signatures and adds them to your `$nu.plugin-file`, replacing any existing plugin definition with the same name
2. [`plugin use`](#plugin-use-toc), a parser command, which loads the plugin command signatures from your `$nu.plugin-file` and makes them available in scope.

The previous example would now be equivalent to this, at the REPL:

```nushell
# Add the plugin's commands to your plugin registry file:
> plugin add ~/.cargo/bin/nu_plugin_gstat

# Load it into scope:
> plugin use gstat
```

Note that this _will not_ work in a script in this order, as `plugin use` is a [parser command](/book/thinking_in_nu.md#think-of-nushell-as-a-compiled-language) and would get evaluated first. If you would like to make sure a certain plugin is available in a script, there are a few options:

1. Prepare a plugin registry file in advance, and use `--plugin-config` with `plugin use`:
   ```nushell
   plugin use --plugin-config /path/to/custom.msgpackz your_required_plugin
   ```
2. The same thing, but pass the `plugin config` to `nu`:
   ```nushell
   nu --plugin-config /path/to/custom.msgpackz your-script.nu
   ```
3. Pass a NUON list to `--plugins` (new in 0.93) to `nu`, to use plugins without a registry file:

   ```nushell
   nu --plugins '[/path/to/nu_plugin_your_required_plugin]' your-script.nu

   # or you can use `to nuon` from inside nu:
   let plugins = [
       '/path/to/nu_plugin_foo'
       '/path/to/nu_plugin_bar'
   ]
   nu --plugins ($plugins | to nuon) your-script.nu
   ```

The last option will run the plugin to get signatures at startup, without modifying the user's registry file, and can even be used when `--no-config-file` is specified.

Finally, we have also added [`plugin rm`](#plugin-rm-toc), which removes a plugin from the registry file. This was something that previously needed to be done manually in a text editor, but is made possible by the new format.

## New plugin registry format [[toc](#table-of-content)]

::: warning Breaking change
See a full overview of the [breaking changes](#breaking-changes)
:::

The plugin registry format has been changed from the previous Nushell script format (containing a sequence of `register` commands) to a custom, declarative format based on [MessagePack](https://msgpack.org/) compressed with [brotli](https://github.com/google/brotli). This new format is called `msgpackz`, and the default plugin file is `plugin.msgpackz` instead of `plugin.nu`.

Your existing `plugin.nu` file will be automatically upgraded to `plugin.msgpackz` the first time version 0.93 runs.

The declarative format brings a number of benefits:

1. It can be edited more structurally, allowing us to replace the entire definition of one plugin at once, which is more logically consistent if a plugin removes commands from one version to the next, and also allowing us to support new commands like [`plugin rm`](#plugin-rm-toc).
2. It supports adding metadata about plugins as a whole rather than just the command signatures, if we need to.
3. It contains the Nushell version that generated it, allowing us to potentially fix issues between versions.
4. It fails gracefully - if something about a particular plugin can't be parsed because of a change to the serialization format, other plugins that don't have that issue can still load.

We chose to use compressed MessagePack because it is very fast to load, and the file is loaded every time `nu` starts, so with a lot of plugins or plugins that expose a lot of commands (e.g. the new `polars` plugin), this was a big problem for startup times in general.

The most significantly _breaking_ part of this breaking change is that the following is no longer possible:

```nushell
source $nu.plugin-file
```

You can use the [`plugin use`](#plugin-use-toc) command instead to (re-)load a specific plugin from the plugin registry file:

```nushell
> plugin use gstat
```

## Improved terminal interaction for plugins [[toc](#table-of-content)]

Plugins are now able to run over a UNIX domain socket or Windows named pipe instead of `stdin`/`stdout` if they support it ([#12448](https://github.com/nushell/nushell/pull/12448)). All Rust plugins support this mode by default, but it is optional; plugins written in other languages are not forced to implement this, and the stdio mode is still always attempted. The [feature is advertised as `LocalSocket`](/contributor-book/plugin_protocol_reference.md#localsocket-feature) and the upgrade is automatic when supported by the plugin and confirmed to be functional.

This frees up stdio for interaction with the user's terminal, which makes plugins that rely on that, including terminal UI plugins like @amtoine's [`nu_plugin_explore`](https://github.com/amtoine/nu_plugin_explore) simpler and more reliable to implement.

We also added [engine calls](/contributor-book/plugin_protocol_reference.md#enterforeground-engine-call) for moving the plugin into the terminal controlling (foreground) process group, mainly for Unix platforms. This was also necessary to fully support terminal UI plugins, after the last release's new persistence functionality caused plugins to run in a new, background process group by default.

## Introduction of the Polars Plugin [[toc](#table-of-content)]

With the enhancements to the plugins framework, we have migrated the dataframes crate to the
`nu_plugin_polars` plugin. In this release, the functionality of the Polars plugin closely mirrors
that of the dataframes plugin, ensuring seamless migration for existing scripts.
After installing the plugin, simply replace `dfr` with `polars` to adapt your scripts.

### Changes from the Dataframes Crate

- The command name has been updated from `dfr` to `polars`, setting the stage for future support of additional dataframe libraries.
- The `dtypes` command has been removed, as its functionality is largely duplicated by the newer `polars schema` command.
- The equivalent of `dfr ls` is now `polars store-ls`, offering insight into the currently cached dataframes
  However, there isn't a direct way to display the variables to which they have been assigned.
- Introducing `polars store-get` and `polars store-rm` to respectively retrieve and remove values from the plugin's internal object cache.

### Installation

Installing the Polars plugin follows the same process as other plugins:
```nushell
# Install the polars plugin
> cargo install nu_plugin_polars

# Add the plugin's commands to your plugin registry file:
> plugin add ~/.cargo/bin/nu_plugin_polars

# Load it into scope:
> plugin use polars
```
## Dataframes deprecation [[toc](#table-of-content)]

With the introduction of Polars plugin, the dataframe functionality is now deprecated
and slated for removal in version 0.94.0. As such, the `dataframe` cargo feature will also be removed in 0.94.0.
This means that the "full" versions of the pre-compiled nushell binaries will no longer be provided
on Github, since these were the same as the standard binaries but with the `dataframe` feature enabled.

## Lazy record deprecation [[toc](#table-of-content)]

This version deprecates the `lazy make` command and lazy records in general. In the next version, 0.94.0,
lazy records will be removed entirely. This motivation behind this is to simplify the language,
as lazy records already had flaky support across the various nushell commands.
Issue [#12622](https://github.com/nushell/nushell/issues/12622) explains the reasoning in more detail.
In the future, the `sys` and `debug info` commands will return regular records instead of lazy records.
The plan is to introduce new APIs for these commands as a replacement for the existing lazy evaluation.

## Stricter rules around setting environment variables [[toc](#table-of-content)]

::: warning Breaking change
See a full overview of the [breaking changes](#breaking-changes-toc)
:::

The setting of environment variables via the following ways:
- `$env.VAR_NAME = ...` assignment
- scopes with the `with-env` command
- the short hand syntax `FOO=bar command-to-run`
- the `load-env` command

will now consistently prohibit you from changing a set of special environment variables controlled by Nushell.
Currently this is the following set (already valid for `$env.` assignment):
- `$env.PWD`
- `$env.FILE_PWD`
- `$env.CURRENT_FILE`
This set may be expanded by future breaking changes to ensure consistent semantics of those special variables

Furthermore the `FOO=bar BAZ=bla command` shorthand syntax to set an environment variable for the scope of one command is now stricter.
It will disallow you from repeating the same environment variable name twice and instead return an error ([#12523](https://github.com/nushell/nushell/pull/12523)).

```nushell
# Now raises an error
FOO=bar FOO=bla command
```

Additionally, we standardize on using records to pass a map of environment variables to the `with-env` command, and thus [deprecate the other previously allowed forms with this release](#with-env-toc).

## Improved parsing of input/output types [[toc](#table-of-content)]

Thanks to [@texastoland](https://github.com/texastoland) in [#12339](https://github.com/nushell/nushell/pull/12339),
the input/output types for custom commands can now extend across multiple lines.

```nushell
def "into bool" []: [
  int -> bool
  string -> bool
] {
  match $in {
    0 => false
    1 => true
    "false" => false
    "true" => true
  }
}
```

## New CLI flag: `--no-newline` [[toc](#table-of-content)]

This release adds a new CLI flag to the `nu` binary: `--no-newline`. Providing this flag will disable
the trailing new line from being printed by nushell ([#12410](https://github.com/nushell/nushell/pull/12410)).

## Hall of fame [[toc](#table-of-content)]

### Bug fixes [[toc](#table-of-content)]

Thanks to all the contributors below for helping us solve issues and bugs :pray:

| author                                             | description                                                                          | url                                                     |
| -------------------------------------------------- | ------------------------------------------------------------------------------------ | ------------------------------------------------------- |
| [@fdncred](https://github.com/fdncred)             | restore `query web --as-table` to working order                                      | [#12693](https://github.com/nushell/nushell/pull/12693) |
| [@IanManske](https://github.com/IanManske)         | Make exit code available in `catch` block                                            | [#12648](https://github.com/nushell/nushell/pull/12648) |
| [@merelymyself](https://github.com/merelymyself)   | make `grid` throw an error when not enough columns                                   | [#12672](https://github.com/nushell/nushell/pull/12672) |
| [@IanManske](https://github.com/IanManske)         | Fix an `into bits` example                                                           | [#12668](https://github.com/nushell/nushell/pull/12668) |
| [@IanManske](https://github.com/IanManske)         | `each` signature fix                                                                 | [#12666](https://github.com/nushell/nushell/pull/12666) |
| [@IanManske](https://github.com/IanManske)         | Make the same file error more likely to appear                                       | [#12601](https://github.com/nushell/nushell/pull/12601) |
| [@WindSoilder](https://github.com/WindSoilder)     | set the type of default NU_LIB_DIRS and NU_PLUGIN_DIRS to list\<string\>             | [#12573](https://github.com/nushell/nushell/pull/12573) |
| [@devyn](https://github.com/devyn)                 | Replace subtraction of Instants and Durations with saturating subtractions           | [#12549](https://github.com/nushell/nushell/pull/12549) |
| [@amtoine](https://github.com/amtoine)             | fix std log                                                                          | [#12470](https://github.com/nushell/nushell/pull/12470) |
| [@singh-priyank](https://github.com/singh-priyank) | Fix negative value file size for "into filesize" (issue #12396)                      | [#12443](https://github.com/nushell/nushell/pull/12443) |
| [@IanManske](https://github.com/IanManske)         | `explain` refactor                                                                   | [#12432](https://github.com/nushell/nushell/pull/12432) |
| [@ysthakur](https://github.com/ysthakur)           | Don't check if stderr empty in test_xdg_config_symlink                               | [#12435](https://github.com/nushell/nushell/pull/12435) |
| [@IanManske](https://github.com/IanManske)         | Prevent panic on date overflow                                                       | [#12427](https://github.com/nushell/nushell/pull/12427) |
| [@IanManske](https://github.com/IanManske)         | Fix merging child stack into parent                                                  | [#12426](https://github.com/nushell/nushell/pull/12426) |
| [@ysthakur](https://github.com/ysthakur)           | Fix #12416 by canonicalizing XDG_CONFIG_HOME before comparing to config_dir()        | [#12420](https://github.com/nushell/nushell/pull/12420) |
| [@IanManske](https://github.com/IanManske)         | `Range` refactor                                                                     | [#12405](https://github.com/nushell/nushell/pull/12405) |
| [@merelymyself](https://github.com/merelymyself)   | prevent `select` (negative number) from hanging shell                                | [#12393](https://github.com/nushell/nushell/pull/12393) |
| [@merelymyself](https://github.com/merelymyself)   | Make auto-cd check for permissions                                                   | [#12342](https://github.com/nushell/nushell/pull/12342) |
| [@devyn](https://github.com/devyn)                 | Add BufWriter to ChildStdin on the plugin interface                                  | [#12419](https://github.com/nushell/nushell/pull/12419) |
| [@devyn](https://github.com/devyn)                 | Fix deadlock on PluginCustomValue drop                                               | [#12418](https://github.com/nushell/nushell/pull/12418) |
| [@eopb](https://github.com/eopb)                   | Fix stop suggesting `--trash` when already enabled (issue #12361)                    | [#12362](https://github.com/nushell/nushell/pull/12362) |
| [@devyn](https://github.com/devyn)                 | Fix #12391: mkdir uses process startup directory instead of current script directory | [#12394](https://github.com/nushell/nushell/pull/12394) |
| [@merelymyself](https://github.com/merelymyself)   | prevent parser from parsing variables as units                                       | [#12378](https://github.com/nushell/nushell/pull/12378) |
| [@IanManske](https://github.com/IanManske)         | Fix hooks on 0.92.0                                                                  | [#12383](https://github.com/nushell/nushell/pull/12383) |
| [@sholderbach](https://github.com/sholderbach)     | Make default config conservative about clipboard                                     | [#12385](https://github.com/nushell/nushell/pull/12385) |
| [@WindSoilder](https://github.com/WindSoilder)     | Avoid panic when pipe a variable to a custom command which have recursive call       | [#12491](https://github.com/nushell/nushell/pull/12491) |
| [@TheLostLambda](https://github.com/TheLostLambda) | fix(shell_integration): set window title on startup                                  | [#12569](https://github.com/nushell/nushell/pull/12569) |
| [@texastoland](https://github.com/texastoland)     | Ensure `currently_parsed_cwd` is set for config files                                | [#12338](https://github.com/nushell/nushell/pull/12338) |
| [@YizhePKU](https://github.com/YizhePKU)           | Fix circular source causing Nushell to crash                                         | [#12262](https://github.com/nushell/nushell/pull/12262) |
| [@friaes](https://github.com/friaes)               | Fix circular source causing Nushell to crash                                         | [#12411](https://github.com/nushell/nushell/pull/12411) |

### Enhancing the documentation [[toc](#table-of-content)]

Thanks to all the contributors below for helping us making the documentation of Nushell commands better :pray:
| author                                             | description                                                                  | url                                                     |
| -------------------------------------------------- | ---------------------------------------------------------------------------- | ------------------------------------------------------- |
| [@deepanchal](https://github.com/deepanchal)       | fix simple typo in commandline_.rs                                           | [#12387](https://github.com/nushell/nushell/pull/12387) |
| [@SylvanBrocard](https://github.com/SylvanBrocard) | Update list of supported formats in dfr open error message.                  | [#12408](https://github.com/nushell/nushell/pull/12408) |
| [@IanManske](https://github.com/IanManske)         | Mention `print` in the `echo` help text                                      | [#12436](https://github.com/nushell/nushell/pull/12436) |
| [@oornaque](https://github.com/oornaque)           | Fix typo in help stor import                                                 | [#12442](https://github.com/nushell/nushell/pull/12442) |
| [@KAAtheWiseGit](https://github.com/KAAtheWiseGit) | Fix example wording in `seq date`                                            | [#12665](https://github.com/nushell/nushell/pull/12665) |
| [@IanManske](https://github.com/IanManske)         | Fix an `into bits` example                                                   | [#12668](https://github.com/nushell/nushell/pull/12668) |
| [@fdncred](https://github.com/fdncred)             | improve `nu --lsp` command tooltips                                          | [#12589](https://github.com/nushell/nushell/pull/12589) |
| [@NotTheDr01ds](https://github.com/NotTheDr01ds)   | Fixes #12482 by pointing help links for ndjson to a non-spam source (take 2) | [#12509](https://github.com/nushell/nushell/pull/12509) |
| [@woosaaahh](https://github.com/woosaaahh)         | Change `cal --week-start` examples + error message                           | [#12597](https://github.com/nushell/nushell/pull/12597) |
| [@maxim-uvarov](https://github.com/maxim-uvarov)   | add search_term "str extract" to `parse` command                             | [#12600](https://github.com/nushell/nushell/pull/12600) |
| [@IanManske](https://github.com/IanManske)         | Improve the "input and output are the same file" error text                  | [#12619](https://github.com/nushell/nushell/pull/12619) |

## Our set of commands is evolving [[toc](#table-of-content)]

### New commands [[toc](#table-of-content)]

#### `plugin add` [[toc](#table-of-content)]

Adds a plugin to the plugin registry file (default `$nu.plugin-path`).

```nushell
plugin add ~/.cargo/bin/nu_plugin_gstat
```

A different registry file can be used if desired:

```nushell
plugin add --plugin-config ~/polars.msgpackz ~/.cargo/bin/nu_plugin_polars
```

Replaces part of `register`, but can be used as a normal command, so it can be used within a script on a generated path. For example the following is now possible:

```nushell
glob ~/.cargo/bin/nu_plugin_* | each { |file| plugin add $file }
```

#### `plugin rm` [[toc](#table-of-content)]

Removes a plugin from the plugin registry file (default `$nu.plugin-path`).

```nushell
plugin rm gstat
plugin rm --plugin-config ~/polars.msgpackz polars
```

The commands will still remain in scope, but will not be present the next time `nu` is started.

#### `plugin use` [[toc](#table-of-content)]

Loads a plugin from the plugin registry file (default `$nu.plugin-path`) **at parse time**.

This replaces the other part of `register` - actually adding the commands to scope. It does not run the plugin executable, though, it just loads the [previously added](#plugin-add-toc) commands from the registry file.

#### `from msgpack` [[toc](#table-of-content)]

Reads [MessagePack](https://msgpack.org) format data into Nu values.

Example:

```nushell
> 0x[a7 4e 75 73 68 65 6c 6c] | from msgpack
Nushell

# Open a MessagePack formatted file:
> open nushell.msgpack
╭─────────┬───────╮
│ nushell │ rocks │
╰─────────┴───────╯
```

You can read a stream of multiple MessagePack objects in the same format as the plugin protocol by using `from msgpack --objects`:

```nushell
> open --raw ~/nu_plugin_example.in.raw | from msgpack --objects
╭───┬─────────────────────────────────────────────────╮
│ 0 │ ╭───────┬────────────────────────────────────╮  │
│   │ │       │ ╭──────────┬─────────────────────╮ │  │
│   │ │ Hello │ │ protocol │ nu-plugin           │ │  │
│   │ │       │ │ version  │ 0.93.0              │ │  │
│   │ │       │ │          │ ╭───┬─────────────╮ │ │  │
│   │ │       │ │ features │ │ # │    name     │ │ │  │
│   │ │       │ │          │ ├───┼─────────────┤ │ │  │
│   │ │       │ │          │ │ 0 │ LocalSocket │ │ │  │
│   │ │       │ │          │ ╰───┴─────────────╯ │ │  │
│   │ │       │ ╰──────────┴─────────────────────╯ │  │
│   │ ╰───────┴────────────────────────────────────╯  │
│   │                                                 │
│ 1 │ ...                                             │
│ 2 │ ...                                             │
│ 3 │ ...                                             │
│ 4 │ ...                                             │
│   │                                                 │
│ 5 │ Goodbye                                         │
╰───┴─────────────────────────────────────────────────╯

```

Example captured with [nu_plugin_tracer](https://github.com/tesujimath/nu_plugin_tracer).

#### `to msgpack` [[toc](#table-of-content)]

Converts Nu values into [MessagePack](https://msgpack.org).

Example:

```nushell
> 'Nushell' | to msgpack
Length: 8 (0x8) bytes | printable whitespace ascii_other non_ascii
00000000:   a7 4e 75 73  68 65 6c 6c                             ×Nushell

# Save in MessagePack format to nushell.msgpack:
> {nushell: rocks} | save nushell.msgpack
```

#### `from msgpackz` [[toc](#table-of-content)]

Just like [`from msgpack`](#from-msgpack-toc), but decompresses with [brotli](https://github.com/google/brotli) first.

The `msgpackz` format is used by the new plugin file format:

```nushell
> open ~/.config/nushell/plugin.msgpackz
╭─────────────────┬─────────────────────────────────────────────────────────────────────────────────╮
│ nushell_version │ 0.92.3                                                                          │
│                 │ ╭───┬───────────────┬────────────────────────────────────┬───────┬────────────╮ │
│ plugins         │ │ # │     name      │              filename              │ shell │  commands  │ │
│                 │ ├───┼───────────────┼────────────────────────────────────┼───────┼────────────┤ │
│                 │ │ 0 │ custom_values │ .cargo/bin/nu_plugin_custom_values │       │ [table 8   │ │
│                 │ │   │               │                                    │       │ rows]      │ │
│                 │ │ 1 │ dbus          │ .cargo/bin/nu_plugin_dbus          │       │ [table 7   │ │
│                 │ │   │               │                                    │       │ rows]      │ │
│                 │ │ 2 │ emoji         │ .cargo/bin/nu_plugin_emoji         │       │ [table 1   │ │
│                 │ │   │               │                                    │       │ row]       │ │
│                 │ │ 3 │ example       │ .cargo/bin/nu_plugin_example       │       │ [table 13  │ │
│                 │ │   │               │                                    │       │ rows]      │ │
│                 │ │ 4 │ explore       │ .cargo/bin/nu_plugin_explore       │       │ [table 1   │ │
│                 │ │   │               │                                    │       │ row]       │ │
│                 │ │ 5 │ formats       │ .cargo/bin/nu_plugin_formats       │       │ [table 4   │ │
│                 │ │   │               │                                    │       │ rows]      │ │
│                 │ │ 6 │ gstat         │ .cargo/bin/nu_plugin_gstat         │       │ [table 1   │ │
│                 │ │   │               │                                    │       │ row]       │ │
│                 │ │ 7 │ inc           │ .cargo/bin/nu_plugin_inc           │       │ [table 1   │ │
│                 │ │   │               │                                    │       │ row]       │ │
│                 │ ╰───┴───────────────┴────────────────────────────────────┴───────┴────────────╯ │
╰─────────────────┴─────────────────────────────────────────────────────────────────────────────────╯
```

#### `to msgpackz` [[toc](#table-of-content)]

Just like [`to msgpack`](#from-msgpack-toc), but compresses with [brotli](https://github.com/google/brotli) after encoding.

For example, to use it to manually edit the plugin file:

```nushell
open ~/.config/nushell/plugin.msgpackz |
    update plugins {
        # Remove plugins with missing files:
        where { get filename | path exists }
    } |
    save -f ~/.config/nushell/plugin.msgpackz
```

As with other format commands, `open` and `save` will automatically use the `msgpackz` conversion if the file extension matches.

#### `metadata set` [[toc](#table-of-content)]

The new `metadata set` command added in [#12564](https://github.com/nushell/nushell/pull/12564)
allows one to modify the metadata of a pipeline/value.

For example, you can set the data source to be `ls`, which will activate coloring using `LS_COLORS`:
```nushell
[[name]; [Cargo.lock] [Cargo.toml] [README.md]] | metadata set --datasource-ls
```

### Changes to existing commands [[toc](#table-of-content)]

#### `with-env` [[toc](#table-of-content)]

::: warning Breaking change
See a full overview of the [breaking changes](#breaking-changes-toc)
:::

Passing environment variables to `with-env` via the list-like or single-row table form
is now deprecated after [#12523](https://github.com/nushell/nushell/pull/12523):

```nushell
# deprecated
with-env [X Y W Z] { $env.X }
# also deprecated
with-env [[X Y]; [W Z]] { $env.X }
```

Instead, you should use the record form:

```nushell
with-env { X: 'Y', W: 'Z' } { $env.X }
```

This also explicitly stops you from repeating the name of a environment variable,
which was a potential source of bugs.

```nushell
# silently: bar
with-env [X foo X bar] { $env.X }
# error
with-env { X: 'foo', X: 'bar' } { $env.X }
```

Additionally, setting the `PWD` variable through `with-env` is now disallowed.

#### `load-env` [[toc](#table-of-content)]

::: warning Breaking change
See a full overview of the [breaking changes](#breaking-changes-toc)
:::

With [#12522](https://github.com/nushell/nushell/pull/12522), setting the `PWD` variable through
`load-env` is now disallowed, both when the record is given as a pipeline input or command argument.

#### `last` [[toc](#table-of-content)]

::: warning Breaking change
See a full overview of the [breaking changes](#breaking-changes-toc)
:::

To be consistent with `first` and other commands, `last` now errors if the input is empty
([#12478](https://github.com/nushell/nushell/pull/12478)).

To suppress the error and return null if an input is empty, wrap `last` in a `try` block:
```nushell
[] | try { last }
```

#### `drop` [[toc](#table-of-content)]

::: warning Breaking change
See a full overview of the [breaking changes](#breaking-changes-toc)
:::

With [#12479](https://github.com/nushell/nushell/pull/12479),
`drop` will now error if the number of rows/columns is negative.

#### `skip` [[toc](#table-of-content)]

::: warning Breaking change
See a full overview of the [breaking changes](#breaking-changes-toc)
:::

To be consistent with `take` and other commands, `skip` no longer accepts external streams as input
([#12559](https://github.com/nushell/nushell/pull/12559)).

#### `group-by` [[toc](#table-of-content)]

::: warning Breaking change
See a full overview of the [breaking changes](#breaking-changes-toc)
:::

If a closure was used as the grouper for `group-by`,
then errors inside the closure would previously be ignored.
Instead, `group-by` would put the row/item under the `error` group.
With [#12508](https://github.com/nushell/nushell/pull/12508),
errors are no longer ignored and will immediately be bubbled up.

#### `timeit` [[toc](#table-of-content)]

::: warning Breaking change
See a full overview of the [breaking changes](#breaking-changes-toc)
:::

After [#12465](https://github.com/nushell/nushell/pull/12465), the `timeit` command will
no longer capture external command output, instead redirecting output to the terminal/stdio.

#### `kill` [[toc](#table-of-content)]

::: warning Breaking change
See a full overview of the [breaking changes](#breaking-changes-toc)
:::

The `kill` command used to return a stream of values in certain cases.
In [#12480](https://github.com/nushell/nushell/pull/12480)
this was changed so that `kill` now always returns a single value (null or a string).

#### `each` [[toc](#table-of-content)]

The signature of `each` previously showed that the closure provided to each had a second `Int` parameter.
This parameter was removed some time ago, and the signature has been updated in
[#12666](https://github.com/nushell/nushell/pull/12666).

#### `ls` [[toc](#table-of-content)]

Instead of a single optional path, the `ls` command now takes a rest argument of paths
([#12327](https://github.com/nushell/nushell/pull/12327)). I.e., you can spread a list into `ls`:
```nushell
ls ...[directory1 directory2]
```
or simply `ls` multiple directories:
```nushell
ls directory1 directory2
```

#### `du` [[toc](#table-of-content)]

In the `ls` PR ([#12327](https://github.com/nushell/nushell/pull/12327)),
the same changes were also made to `du`. So now, `du` takes a rest argument of paths just like `ls`.

#### `try` [[toc](#table-of-content)]

With [#12648](https://github.com/nushell/nushell/pull/12648), the exit code of the failed external
command can be retrieved in a `catch` block via the usual `$env.LAST_EXIT_CODE`.

#### `version` [[toc](#table-of-content)]

Thanks to [@poliorcetics](https://github.com/poliorcetics), the `version` command now has additional
columns for the `major`, `minor`, `patch`, and `pre` portions of the current nushell version
([#12593](https://github.com/nushell/nushell/pull/12593)).

#### `into filesize` [[toc](#table-of-content)]

Thanks to [@singh-priyank](https://github.com/singh-priyank) in
[#12443](https://github.com/nushell/nushell/pull/12443),
`into filesize` can now parse negative filesizes from strings.

#### `view source` [[toc](#table-of-content)]

Thanks to [@merelymyself](https://github.com/merelymyself), the `view source` command now displays
more information like type signatures and default argument values ([#12359](https://github.com/nushell/nushell/pull/12359)).

#### `grid` [[toc](#table-of-content)]

Instead of returning an error string, `grid` now triggers an error if it is unable to fit the grid
in the available or specified number of columns ([#12654](https://github.com/nushell/nushell/issues/12654)).

#### `explain` [[toc](#table-of-content)]

With [#12432](https://github.com/nushell/nushell/pull/12432),
the `type` column returned from `explain` should no longer contain `string` for every row.

### Deprecated commands [[toc](#table-of-content)]

#### `register` [[toc](#table-of-content)]

This command is deprecated in favor of the new [`plugin add`](#plugin-add-toc) and [`plugin use`](#plugin-use-toc) commands. See the [relevant section](#redesigned-plugin-management-commands-toc) for the reasoning behind this change.

#### `lazy make` [[toc](#table-of-content)]

The `lazy make` command has been deprecated in [#12656](https://github.com/nushell/nushell/pull/12656)
following the deprecation of lazy records (see [lazy record deprecation](#lazy-record-deprecation-toc)).

#### `describe --collect-lazyrecords` [[toc](#table-of-content)]

Since lazy records are now deprecated (see [lazy record deprecation](#lazy-record-deprecation-toc)),
the `--collect-lazyrecords` flag for `describe` was also deprecated in
[#12667](https://github.com/nushell/nushell/pull/12667).

### Removed commands and flags [[toc](#table-of-content)]

#### `run-external` flags [[toc](#table-of-content)]

The `--redirect-stdout`, `--redirect-stderr`, `--redirect-combine`, and `--trim-end-newline` flags
have been removed in [#12659](https://github.com/nushell/nushell/pull/12659) following their
deprecation in 0.92.0. See the [previous release notes](https://www.nushell.sh/blog/2024-04-02-nushell_0_92_0.html#run-external-flags-toc)
for migration info.

#### `commandline` flags [[toc](#table-of-content)]

The `--cursor`, `--cursor-end`, `--append`, `--insert`, and `--replace` flags on `commandline`
were removed with [#12658](https://github.com/nushell/nushell/pull/12658).
These flags were deprecated back in 0.91.0 following the introduction of a new command API for `commandline`.
See the [previous release notes](https://www.nushell.sh/blog/2024-03-05-nushell_0_91_0.html#commandline)
for more information.

## For plugin developers [[toc](#table-of-content)]

### New protocol features [[toc](#table-of-content)]

- [`LocalSocket`: local socket mode.](/contributor-book/plugin_protocol_reference.md#localsocket-feature) Added in PR [#12448](https://github.com/nushell/nushell/pull/12448).

### New engine calls [[toc](#table-of-content)]

See the [Rust docs for `EngineInterface`](https://docs.rs/nu-plugin/0.93.0/nu_plugin/struct.EngineInterface.html) for specific documentation for Rust plugins.

- [`GetSpanContents`: view the source code of a span.](/contributor-book/plugin_protocol_reference.md#getspancontents-engine-call) Added in PR [#12439](https://github.com/nushell/nushell/pull/12439).
- [`EnterForeground`: enter the terminal controlling (foreground) process group.](/contributor-book/plugin_protocol_reference.md#enterforeground-engine-call) Added in PR [#12448](https://github.com/nushell/nushell/pull/12448).
- [`LeaveForeground`: leave the foreground process group.](/contributor-book/plugin_protocol_reference.md#leaveforeground-engine-call) Added in PR [#12448](https://github.com/nushell/nushell/pull/12448).

# Breaking changes [[toc](#table-of-content)]

- [#12659](https://github.com/nushell/nushell/pull/12659) Remove deprecated flags on `run-external`
- [#12658](https://github.com/nushell/nushell/pull/12658) Remove deprecated flags on `commandline`
- [#12610](https://github.com/nushell/nushell/pull/12610) Shrink the size of `Expr`
- [#12601](https://github.com/nushell/nushell/pull/12601) Make the same file error more likely to appear
- [#12579](https://github.com/nushell/nushell/pull/12579) Overhaul the plugin cache file with a new msgpack+brotli format
- [#12582](https://github.com/nushell/nushell/pull/12582) Remove the `Value::Block` case
- [#12559](https://github.com/nushell/nushell/pull/12559) Don't allow skip on external stream
- [#12577](https://github.com/nushell/nushell/pull/12577) Removed the polars dtypes command
- [#12566](https://github.com/nushell/nushell/pull/12566) Update crate feature flags
- [#12508](https://github.com/nushell/nushell/pull/12508) Make `group-by` return errors in closure
- [#12523](https://github.com/nushell/nushell/pull/12523) Improve `with-env` robustness
- [#12522](https://github.com/nushell/nushell/pull/12522) Disallow setting the `PWD` via `load-env` input
- [#12478](https://github.com/nushell/nushell/pull/12478) Refactor `first` and `last`
- [#12480](https://github.com/nushell/nushell/pull/12480) Return value instead of stream from `kill`
- [#12479](https://github.com/nushell/nushell/pull/12479) `drop` refactor
- [#12465](https://github.com/nushell/nushell/pull/12465) Force timeit to not capture stdout
- [#12365](https://github.com/nushell/nushell/pull/12365) Implement `De`-/`Serialize` for `Record` manually

# Full changelog [[toc](#table-of-content)]

- [devyn](https://github.com/devyn) created
    - [Fix missing local socket feature](https://github.com/nushell/nushell/pull/12698)
    - [Split the plugin crate](https://github.com/nushell/nushell/pull/12563)
    - [Fix inconsistent print behavior](https://github.com/nushell/nushell/pull/12675)
    - [Add a bit more delay before `ps` calls in plugin persistence tests](https://github.com/nushell/nushell/pull/12673)
    - [Add plugin error propagation on write/flush](https://github.com/nushell/nushell/pull/12670)
    - [Msgpack commands](https://github.com/nushell/nushell/pull/12664)
    - [Rename plugin cache file ⇒ plugin registry file](https://github.com/nushell/nushell/pull/12634)
    - [Fix (and test) for a deadlock that can happen while waiting for protocol info](https://github.com/nushell/nushell/pull/12633)
    - [Further improve messages related to error propagation on plugin calls](https://github.com/nushell/nushell/pull/12646)
    - [Accept filenames in other plugin management commands](https://github.com/nushell/nushell/pull/12639)
    - [Fix error message propagation on plugin call failure](https://github.com/nushell/nushell/pull/12632)
    - [Deprecate `register` and add `plugin use`](https://github.com/nushell/nushell/pull/12607)
    - [Add `ErrSpan` extension trait for `Result`](https://github.com/nushell/nushell/pull/12626)
    - [update `toolkit register plugins` ⇒ `toolkit add plugins`](https://github.com/nushell/nushell/pull/12613)
    - [stress_internals: exit(1) on io error](https://github.com/nushell/nushell/pull/12612)
    - [Overhaul the plugin cache file with a new msgpack+brotli format](https://github.com/nushell/nushell/pull/12579)
    - [Switch plugin msgpack protocol to named format](https://github.com/nushell/nushell/pull/12580)
    - [Add an example Nushell plugin written in Nushell itself](https://github.com/nushell/nushell/pull/12574)
    - [Fix the error output in the python plugin to match LabeledError](https://github.com/nushell/nushell/pull/12575)
    - [Replace subtraction of Instants and Durations with saturating subtractions](https://github.com/nushell/nushell/pull/12549)
    - [Improve safety of `get_unchecked_str` in `nu_system::macos`](https://github.com/nushell/nushell/pull/12550)
    - [Add a panic unwind handler during plugin calls](https://github.com/nushell/nushell/pull/12526)
    - [Python plugin: remove unnecessary fields from signature](https://github.com/nushell/nushell/pull/12533)
    - [Local socket mode and foreground terminal control for plugins](https://github.com/nushell/nushell/pull/12448)
    - [Improve error messages for plugin protocol by removing `#[serde(untagged)]`](https://github.com/nushell/nushell/pull/12510)
    - [Copy-on-write for record values](https://github.com/nushell/nushell/pull/12305)
    - [Switch the CI to use macos-13 instead of macos-latest, due to failures](https://github.com/nushell/nushell/pull/12493)
    - [Isolate tests from user config](https://github.com/nushell/nushell/pull/12437)
    - [Add --no-newline option to `nu`](https://github.com/nushell/nushell/pull/12410)
    - [Add `GetSpanContents` engine call](https://github.com/nushell/nushell/pull/12439)
    - [Use nu-cmd-lang default context for plugin tests](https://github.com/nushell/nushell/pull/12434)
    - [Fix some of the tests in `tests::shell`](https://github.com/nushell/nushell/pull/12417)
    - [Add BufWriter to ChildStdin on the plugin interface](https://github.com/nushell/nushell/pull/12419)
    - [Improve handling of custom values in plugin examples](https://github.com/nushell/nushell/pull/12409)
    - [Fix deadlock on PluginCustomValue drop](https://github.com/nushell/nushell/pull/12418)
    - [Fix testing.nu import of std log](https://github.com/nushell/nushell/pull/12392)
    - [Fix #12391: mkdir uses process startup directory instead of current script directory](https://github.com/nushell/nushell/pull/12394)
    - [Make drop notification timing for plugin custom values more consistent](https://github.com/nushell/nushell/pull/12341)
- [fdncred](https://github.com/fdncred) created
    - [fixes a rust-analyzer warning](https://github.com/nushell/nushell/pull/12694)
    - [restore `query web --as-table` to working order](https://github.com/nushell/nushell/pull/12693)
    - [update wix to include nu_plugin_polars](https://github.com/nushell/nushell/pull/12687)
    - [update to latest reedline](https://github.com/nushell/nushell/pull/12644)
    - [update to latest reedline 455b9a3](https://github.com/nushell/nushell/pull/12630)
    - [improve `nu --lsp` command tooltips](https://github.com/nushell/nushell/pull/12589)
    - [add ability to set metadata](https://github.com/nushell/nushell/pull/12564)
    - [bump nushell to latest reedline](https://github.com/nushell/nushell/pull/12497)
    - [better logging for shell_integration ansi escapes + better plugin perf logging](https://github.com/nushell/nushell/pull/12494)
    - [try to be a bit more precise with repl logging](https://github.com/nushell/nushell/pull/12449)
    - [bump python plugin nushell version](https://github.com/nushell/nushell/pull/12367)
- [maxim-uvarov](https://github.com/maxim-uvarov) created
    - [add tests to `polars unique`](https://github.com/nushell/nushell/pull/12683)
    - [add search_term "str extract" to `parse` command](https://github.com/nushell/nushell/pull/12600)
- [hustcer](https://github.com/hustcer) created
    - [Upgrade hustcer/setup-nu to v3.10 to fix macOS arm64 build errors](https://github.com/nushell/nushell/pull/12681)
- [IanManske](https://github.com/IanManske) created
    - [Add deprecation warning to `describe --collect-lazyrecords`](https://github.com/nushell/nushell/pull/12667)
    - [Make exit code available in `catch` block](https://github.com/nushell/nushell/pull/12648)
    - [Fix an `into bits` example](https://github.com/nushell/nushell/pull/12668)
    - [`each` signature fix](https://github.com/nushell/nushell/pull/12666)
    - [Remove deprecated flags on `run-external`](https://github.com/nushell/nushell/pull/12659)
    - [Remove deprecated flags on `commandline`](https://github.com/nushell/nushell/pull/12658)
    - [`nu-cmd-lang` cleanup](https://github.com/nushell/nushell/pull/12609)
    - [Lazy record deprecation](https://github.com/nushell/nushell/pull/12656)
    - [Shrink the size of `Expr`](https://github.com/nushell/nushell/pull/12610)
    - [Improve the "input and output are the same file" error text](https://github.com/nushell/nushell/pull/12619)
    - [Refactor using `ClosureEval` types](https://github.com/nushell/nushell/pull/12541)
    - [Make the same file error more likely to appear](https://github.com/nushell/nushell/pull/12601)
    - [Remove the `Value::Block` case](https://github.com/nushell/nushell/pull/12582)
    - [Box `ImportPattern` in `Expr`](https://github.com/nushell/nushell/pull/12568)
    - [Add `ListItem` type for `Expr::List`](https://github.com/nushell/nushell/pull/12529)
    - [Make `group-by` return errors in closure](https://github.com/nushell/nushell/pull/12508)
    - [Add `Record::into_columns`](https://github.com/nushell/nushell/pull/12324)
    - [Fix clippy lint](https://github.com/nushell/nushell/pull/12504)
    - [Refactor `first` and `last`](https://github.com/nushell/nushell/pull/12478)
    - [Return value instead of stream from `kill`](https://github.com/nushell/nushell/pull/12480)
    - [`drop` refactor](https://github.com/nushell/nushell/pull/12479)
    - [Rename `IoStream` to `OutDest`](https://github.com/nushell/nushell/pull/12433)
    - [Mention `print` in the `echo` help text](https://github.com/nushell/nushell/pull/12436)
    - [`explain` refactor](https://github.com/nushell/nushell/pull/12432)
    - [Prevent panic on date overflow](https://github.com/nushell/nushell/pull/12427)
    - [Fix merging child stack into parent](https://github.com/nushell/nushell/pull/12426)
    - [`Range` refactor](https://github.com/nushell/nushell/pull/12405)
    - [Fix hooks on 0.92.0](https://github.com/nushell/nushell/pull/12383)
- [merelymyself](https://github.com/merelymyself) created
    - [make `grid` throw an error when not enough columns](https://github.com/nushell/nushell/pull/12672)
    - [use abbreviated string instead of debug string for `DatetimeParseError`s](https://github.com/nushell/nushell/pull/12517)
    - [prevent `select` (negative number) from hanging shell](https://github.com/nushell/nushell/pull/12393)
    - [Make auto-cd check for permissions](https://github.com/nushell/nushell/pull/12342)
    - [Make `view source` more robust](https://github.com/nushell/nushell/pull/12359)
    - [prevent parser from parsing variables as units](https://github.com/nushell/nushell/pull/12378)
- [KAAtheWiseGit](https://github.com/KAAtheWiseGit) created
    - [Fix example wording in `seq date`](https://github.com/nushell/nushell/pull/12665)
- [app/dependabot](https://github.com/app/dependabot) created
    - [Bump serial_test from 3.0.0 to 3.1.0](https://github.com/nushell/nushell/pull/12638)
    - [Bump rust-ini from 0.20.0 to 0.21.0](https://github.com/nushell/nushell/pull/12637)
    - [Bump actions/checkout from 4.1.2 to 4.1.3](https://github.com/nushell/nushell/pull/12635)
    - [Bump crate-ci/typos from 1.20.9 to 1.20.10](https://github.com/nushell/nushell/pull/12636)
    - [Bump rmp-serde from 1.1.2 to 1.2.0](https://github.com/nushell/nushell/pull/12547)
    - [Bump crate-ci/typos from 1.20.7 to 1.20.9](https://github.com/nushell/nushell/pull/12543)
    - [Bump crate-ci/typos from 1.20.3 to 1.20.7](https://github.com/nushell/nushell/pull/12456)
    - [Bump similar from 2.4.0 to 2.5.0](https://github.com/nushell/nushell/pull/12375)
    - [Bump h2 from 0.3.24 to 0.3.26](https://github.com/nushell/nushell/pull/12413)
    - [Bump rust-embed from 8.2.0 to 8.3.0](https://github.com/nushell/nushell/pull/12374)
    - [Bump shadow-rs from 0.26.1 to 0.27.1](https://github.com/nushell/nushell/pull/12372)
- [WindSoilder](https://github.com/WindSoilder) created
    - [Avoid panic when pipe a variable to a custom command which have recursive call](https://github.com/nushell/nushell/pull/12491)
    - [set the type of default NU_LIB_DIRS and NU_PLUGIN_DIRS to list<string>](https://github.com/nushell/nushell/pull/12573)
    - [Don't allow skip on external stream](https://github.com/nushell/nushell/pull/12559)
    - [Unify `working_set.error` usage.](https://github.com/nushell/nushell/pull/12531)
    - [remove useless path.rs](https://github.com/nushell/nushell/pull/12534)
    - [making `ls` and `du` supports rest parameters.](https://github.com/nushell/nushell/pull/12327)
    - [Force timeit to not capture stdout](https://github.com/nushell/nushell/pull/12465)
- [stormasm](https://github.com/stormasm) created
    - [bump reedline to latest commit point on main](https://github.com/nushell/nushell/pull/12621)
- [sholderbach](https://github.com/sholderbach) created
    - [Update `ratatui` to deduplicate `syn` in build](https://github.com/nushell/nushell/pull/12606)
    - [Small refactor in `cal`](https://github.com/nushell/nushell/pull/12604)
    - [Update crate feature flags](https://github.com/nushell/nushell/pull/12566)
    - [Impl `FusedIterator` for record iterators](https://github.com/nushell/nushell/pull/12542)
    - [Minor housekeeping in the parser](https://github.com/nushell/nushell/pull/12540)
    - [Improve `with-env` robustness](https://github.com/nushell/nushell/pull/12523)
    - [Disallow setting the `PWD` via `load-env` input](https://github.com/nushell/nushell/pull/12522)
    - [Also use old mac workers for `plugins` job](https://github.com/nushell/nushell/pull/12495)
    - [Bump version to `0.92.3`](https://github.com/nushell/nushell/pull/12476)
    - [Bump our Rust version to stable](https://github.com/nushell/nushell/pull/12471)
    - [Update MSRV following `rust-toolchain.toml`](https://github.com/nushell/nushell/pull/12455)
    - [Implement `De`-/`Serialize` for `Record` manually](https://github.com/nushell/nushell/pull/12365)
    - [Tweak release workflow after `0.92.1` lessons](https://github.com/nushell/nushell/pull/12401)
    - [Bump version to `0.92.2`](https://github.com/nushell/nushell/pull/12402)
    - [Bump version to `0.92.1`](https://github.com/nushell/nushell/pull/12380)
    - [Bump `crate-ci/typos` and fix typos](https://github.com/nushell/nushell/pull/12381)
    - [Make default config conservative about clipboard](https://github.com/nushell/nushell/pull/12385)
    - [Bump version for `0.92.0` release](https://github.com/nushell/nushell/pull/12349)
- [ayax79](https://github.com/ayax79) created
    - [Added commands for working with the plugin cache.](https://github.com/nushell/nushell/pull/12576)
    - [Removed the polars dtypes command](https://github.com/nushell/nushell/pull/12577)
    - [Only mark collected dataframes as from_lazy=false when collect is called from the collect command.](https://github.com/nushell/nushell/pull/12571)
    - [Upgrading nu-cmd-dataframe to polars 0.39](https://github.com/nushell/nushell/pull/12554)
    - [Upgrading nu_plugin_polars to polars 0.39.1](https://github.com/nushell/nushell/pull/12551)
    - [Fixing NuLazyFrame/NuDataFrame conversion issues](https://github.com/nushell/nushell/pull/12538)
    - [Cleaning up to_pipe_line_data and cache_and_to_value, making them part of CustomValueSupport](https://github.com/nushell/nushell/pull/12528)
    - [Ensure that lazy frames converted via to-lazy are not converted back to eager frames later in the pipeline.](https://github.com/nushell/nushell/pull/12525)
    - [Added a PluginTest method that will call custom_value_to_base_value](https://github.com/nushell/nushell/pull/12502)
    - [Two consecutive calls to into-lazy should not fail](https://github.com/nushell/nushell/pull/12505)
    - [Polars 0.38 upgrade](https://github.com/nushell/nushell/pull/12506)
    - [Ensure that two columns named index don't exist when converting a Dataframe to a nu Value.](https://github.com/nushell/nushell/pull/12501)
    - [Handle relative paths correctly on polars to-(parquet|jsonl|arrow|etc) commands](https://github.com/nushell/nushell/pull/12486)
    - [Added a short flag -c to polars append --col](https://github.com/nushell/nushell/pull/12487)
    - [displaying span information, creation time, and size with polars ls](https://github.com/nushell/nushell/pull/12472)
    - [Showing full help when running the polars command](https://github.com/nushell/nushell/pull/12462)
    - [Move dataframes support to a plugin](https://github.com/nushell/nushell/pull/12220)
    - [Added let command to PluginTest](https://github.com/nushell/nushell/pull/12431)
- [amtoine](https://github.com/amtoine) created
    - [fix typo in the documentation of `nuon::ToStyle`](https://github.com/nushell/nushell/pull/12608)
    - [add "to nuon" enumeration of possible styles](https://github.com/nushell/nushell/pull/12591)
    - [create `nuon` crate from `from nuon` and `to nuon`](https://github.com/nushell/nushell/pull/12553)
    - [fix std log](https://github.com/nushell/nushell/pull/12470)
- [woosaaahh](https://github.com/woosaaahh) created
    - [Change `cal --week-start` examples + error message](https://github.com/nushell/nushell/pull/12597)
- [poliorcetics](https://github.com/poliorcetics) created
    - [Ab/version details](https://github.com/nushell/nushell/pull/12593)
- [YizhePKU](https://github.com/YizhePKU) created
    - [Fix circular source causing Nushell to crash](https://github.com/nushell/nushell/pull/12262)
- [TheLostLambda](https://github.com/TheLostLambda) created
    - [fix(shell_integration): set window title on startup](https://github.com/nushell/nushell/pull/12569)
- [schrieveslaach](https://github.com/schrieveslaach) created
    - [Set Up Config in LSP Mode](https://github.com/nushell/nushell/pull/12454)
- [NotTheDr01ds](https://github.com/NotTheDr01ds) created
    - [Fixes #12482 by pointing help links for ndjson to a non-spam source (take 2)](https://github.com/nushell/nushell/pull/12509)
- [texastoland](https://github.com/texastoland) created
    - [Lex whitespace in input-output types.](https://github.com/nushell/nushell/pull/12339)
    - [Ensure `currently_parsed_cwd` is set for config files](https://github.com/nushell/nushell/pull/12338)
- [singh-priyank](https://github.com/singh-priyank) created
    - [Fix negative value file size for "into filesize" (issue #12396)](https://github.com/nushell/nushell/pull/12443)
- [oornaque](https://github.com/oornaque) created
    - [Fix typo in help stor import](https://github.com/nushell/nushell/pull/12442)
- [ysthakur](https://github.com/ysthakur) created
    - [Don't check if stderr empty in test_xdg_config_symlink](https://github.com/nushell/nushell/pull/12435)
    - [Fix #12416 by canonicalizing XDG_CONFIG_HOME before comparing to config_dir()](https://github.com/nushell/nushell/pull/12420)
- [friaes](https://github.com/friaes) created
    - [Fix nushell#10591: encode returns error with utf-16le and utf-16be encodings (nushell#10591)](https://github.com/nushell/nushell/pull/12411)
- [eopb](https://github.com/eopb) created
    - [Fix stop suggesting `--trash` when already enabled (issue #12361)](https://github.com/nushell/nushell/pull/12362)
- [SylvanBrocard](https://github.com/SylvanBrocard) created
    - [Update list of supported formats in dfr open error message.](https://github.com/nushell/nushell/pull/12408)
- [deepanchal](https://github.com/deepanchal) created
    - [fix simple typo in commandline_.rs](https://github.com/nushell/nushell/pull/12387)
- [kubouch](https://github.com/kubouch) created
    - [Add missing crate description to nu-plugin-test-support](https://github.com/nushell/nushell/pull/12368)
    - [Bump reedline to 0.31.0](https://github.com/nushell/nushell/pull/12366)
